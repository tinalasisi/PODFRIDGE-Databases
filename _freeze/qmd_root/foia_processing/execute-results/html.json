{
  "hash": "3f485b3b10a0d51592181cbdaca4fb96",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"FOIA Document OCR Processing\"\nsubtitle: \"Processing Murphy & Tong FOIA Documents about State DNA Database Racial Composition\"\nauthor: \"Tina Lasisi | Edit: João P. Donadio\"\ndate: today\nformat:\n  html:\n    toc: true\n    toc-depth: 4\n    toc-expand: 3\n    number-sections: true\nlanguage:\n  toc-title-website: \"\"\neditor: \n  markdown: \n    wrap: 72\n---\n\n# Overview\n\nThis document details the processing of Freedom of Information Act (FOIA) responses from seven U.S. states regarding the demographic composition of their State DNA Index System (SDIS) databases. These responses were obtained by Professor Erin Murphy (NYU Law) in 2018 as part of research on racial disparities in DNA databases.\n\n# Materials and Methods\n\n## Data Sources\n\n### Raw FOIA Responses\n\nThe original FOIA responses are stored in two formats:\n\n-   **PDFs**: `raw/foia_pdfs/` - Original scanned documents\n-   **HTML**: `raw/foia_html/` - OCR'd versions for easier extraction\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show setup code\"}\n# List of required packages\nrequired_packages <- c(\n  \"tidyverse\",    # Data manipulation and visualization\n  \"here\",         # File path management\n  \"knitr\",        # Dynamic report generation\n  \"kableExtra\",   # Enhanced table formatting\n  \"ggplot2\",      # Data visualization\n  \"patchwork\",    # Plot composition and layout\n  \"scales\",       # Axis scaling and formatting\n  \"tidyr\",        # Data tidying and reshaping\n  \"tibble\",       # Modern data frames\n  \"flextable\",    # Advanced table formatting\n  \"DT\",           # Interactive tables\n  \"cowplot\",      # Plotting composition\n  \"sf\",           # Simple Features for spatial data\n  \"usmap\"        # Mapping US states\n)\n  \n\n# Function to install missing packages\ninstall_missing <- function(packages) {\n  for (pkg in packages) {\n    if (!requireNamespace(pkg, quietly = TRUE)) {\n      message(paste(\"Installing missing package:\", pkg))\n      install.packages(pkg, dependencies = TRUE)\n    }\n  }\n}\n\n# Install any missing packages\ninstall_missing(required_packages)\n\n# Load all packages\nsuppressPackageStartupMessages({\n  library(tidyverse)\n  library(here)\n  library(knitr)\n  library(kableExtra)\n  library(ggplot2)\n  library(patchwork)\n  library(scales)\n  library(tidyr)\n  library(tibble)\n  library(flextable)\n  library(cowplot)\n  library(sf)\n  library(usmap)\n})\n\n# Verify all packages loaded successfully\nloaded_packages <- sapply(required_packages, require, character.only = TRUE)\nif (all(loaded_packages)) {\n  message(\"All packages loaded successfully!\")\n} else {\n  warning(\"The following packages failed to load: \", \n          paste(names(loaded_packages)[!loaded_packages], collapse = \", \"))\n}\n\n# Display options\noptions(tibble.width = Inf)\noptions(dplyr.summarise.inform = FALSE)\n\n# Path to per-state files (run notebook from analysis/)\nbase_dir <- here(\"..\")\nper_state <- here(\"data\", \"foia\", \"intermediate\")\n\n# ------------------------------------------------------------------\n# 1. Discover available per-state CSV files\n# ------------------------------------------------------------------\nstate_files <- list.files(per_state, pattern = \"*_foia_data\\\\.csv$\", full.names = TRUE)\n\nif (length(state_files) == 0) {\n  stop(paste(\"No per-state FOIA files found in\", per_state, \". Check the folder path.\"))\n}\n\nstem_to_state <- function(stem) {\n  toks <- str_split(stem, \"_\")[[1]]\n  if (\"foia\" %in% toks) {\n    toks <- toks[1:(which(toks == \"foia\") - 1)]\n  }\n  paste(tools::toTitleCase(toks), collapse = \" \")\n}\n\nstates_available <- map_chr(basename(state_files), ~ stem_to_state(str_remove(.x, \"_foia_data\\\\.csv\")))\n\ncat(paste(\"✓ Found\", length(state_files), \"per-state files:\\n\"))\nfor (s in states_available) {\n  cat(paste(\"  •\", s, \"\\n\"))\n}\n\n# ------------------------------------------------------------------\n# 2. Initialize empty containers for the loop that follows\n# ------------------------------------------------------------------\nfoia_combined <- tibble()\nfoia_state_metadata <- list()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Found 7 per-state files:\n  • California \n  • Florida \n  • Indiana \n  • Maine \n  • Nevada \n  • South Dakota \n  • Texas \n```\n\n\n:::\n:::\n\n\n## Processing workflow\n\nFor transparency, each state file is processed independently then merged\ninto a single **combined long‑format table (`foia_combined`)**:\n\n1.  **Load one file per state** from `data/foia/intermediate/`.\n\n2.  **Append** its rows to `foia_combined`. A parallel dataframe,\n    **`foia_state_metadata`**, records what each state reported (counts,\n    percentages, which categories) and any state-specific\n    characteristics (e.g. Nevada's \"flags\" terminology).\n\n3.  **Quality‑check each state**:\n\n    -   verify that race and gender percentages sum to ≈ 100 % when\n        provided,\n    -   confirm that demographic counts sum to the state's reported\n        total profiles,\n    -   **calculate** any missing counts or percentages and tag those\n        rows `value_source = \"calculated\"`.\n\n4.  **Save outputs**\n\n    -   `data/foia/final/foia_data_clean.csv` — the fully combined tidy\n        table with both reported and calculated values,\n    -   `data/foia/intermediate/foia_state_metadata.csv` — one row per state\n        summarising coverage and caveats. After QC passes, freeze\n        `foia_data_clean.csv` to `data/v1.0/FOIA_demographics.csv`.\n\n## Helper Functions\n\nThe functions below perform each transformation required for harmonizing\nthe state‑level FOIA tables.\n\n### Data Processing Helper Functions Reference\n\n| Function | Definition | Parameters |\n|:-----------------------|:-----------------------|:-----------------------|\n| **`load_state()`** | Loads and preprocesses state FOIA data files, handling numeric conversion and validation | `path`: File path to state CSV |\n| **`enhanced_glimpse()`** | Provides an enhanced data overview with column types, missing values, unique counts, and unique values | `df`: Input dataframe |\n| **`fill_demographic_gaps()`** | Fills missing gender counts and adds Unknown race category when totals permit calculation | `df`: Input dataframe |\n| **`add_combined()`** | Creates Combined offender type by summing Convicted Offender and Arrestee counts when missing | `df`: Input dataframe |\n| **`add_percentages()`** | Derives percentage values from counts for all demographic categories | `df`: Input dataframe |\n| **`counts_consistent()`** | Verifies that demographic counts sum to total_profiles for each offender type | `df`: Input dataframe |\n| **`percentages_consistent()`** | Verifies that percentages sum to 100 ± 0.5% for each category | `df`: Input dataframe |\n| **`report_status()`** | Reports what data types (counts/percentages/both) are available for a category | `df`: Input dataframe, `category`: race or gender |\n| **`verify_category_totals()`** | Compares demographic sums against reported totals and shows differences | `df`: Input dataframe |\n| **`verify_percentage_consistency()`** | Compares reported vs calculated percentages for consistency | `df_combined`: Combined dataframe, `state_name`: State name |\n| **`calculate_combined_totals()`** | Calculates Combined totals by summing across offender types | `df`: Input dataframe, `state_name`: State name |\n| **`calculate_percentages()`** | Calculates percentages from counts for demographic categories | `df_combined`: Combined dataframe, `state_name`: State name |\n| **`calculate_counts_from_percentages()`** | Calculates counts from percentages for demographic categories | `df_combined`: Combined dataframe, `state_name`: State name |\n| **`standardize_offender_types()`** | Standardizes offender type names to consistent terminology | `df`: Input dataframe |\n| **`prepare_state_for_combined()`** | Prepares state data for inclusion in combined dataset with proper columns | `df`: Input dataframe, `state_name`: State name |\n| **`format_compact()`** | Formats large numbers with K/M suffixes for readability | `x`: Numeric value |\n| **`create_pie_chart()`** | Creates pie charts for specific demographic categories | `data`: Input data, `offender_type`, `category`, `value_type`, `title`, `show_values` |\n| **`create_state_visualizations()`** | Creates comprehensive pie chart visualizations for all metrics | `df_combined`: Combined dataframe, `state_name`: State name |\n| **`create_demographic_bar_charts()`** | Creates side-by-side bar charts for gender and race distributions | `df_combined`: Combined dataframe, `state_name`: State name |\n| **`add_state_metadata()`** | Creates and appends a metadata record capturing state data characteristics including available offender types, demographic categories, data formats, and special features | `df`: Input dataframe, `state_name`: State name |\n| **`update_state_metadata()`** | Modifies existing state metadata to update QC results (count/percentage consistency) and append validation notes | `state_name`: State name, `counts_ok`: Count consistency flag, `percentages_ok`: Percentage consistency flag, `notes_text`: Additional notes |\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show helper functions setup\"}\n# Columns retained from every raw table\nCOLS_NEEDED <- c(\"state\", \"offender_type\", \"variable_category\",\n                 \"variable_detailed\", \"value\", \"value_type\")\n\n# ------------------------------------------------------------------\n# 1. Load and preprocess state files\n# ------------------------------------------------------------------\nload_state <- function(path) {\n  \"\n  Read a *_foia_data.csv* file, enforce column order,\n  and convert <1 to 0.5 so that trace counts are retained.\n  Execution halts if non-numeric values remain.\n  \"\n  df <- read_csv(path, show_col_types = FALSE)\n  if (!\"state\" %in% colnames(df)) {\n    df <- df %>%\n      mutate(state = str_remove(basename(path), \"_foia_data\\\\.csv\") %>%\n        str_replace_all(\"_\", \" \") %>%\n        tools::toTitleCase())\n  }\n  df <- df %>% select(all_of(COLS_NEEDED))\n  df$value_source <- \"reported\"\n\n  df <- df %>%\n    mutate(value = ifelse(value == \"<1\", 0.5, value),\n           value = as.numeric(value))\n  \n  nonnumeric <- df %>% filter(is.na(value))\n  if (nrow(nonnumeric) > 0) {\n    cat(paste(\"**Non-numeric rows in\", basename(path), \"; please amend**\\n\"))\n    print(nonnumeric)\n    stop(\"Numeric coercion failure\")\n  }\n  return(df)\n}\n\n\n# ------------------------------------------------------------------\n# 2. Enhanced glimpse\n# ------------------------------------------------------------------\n# Display data types for each column with unique values\nenhanced_glimpse <- function(df) {\n  glimpse_data <- data.frame(\n    Column = names(df),\n    Type = sapply(df, function(x) paste(class(x), collapse = \", \")),\n    Rows = nrow(df),\n    Missing = sapply(df, function(x) sum(is.na(x))),\n    Unique = sapply(df, function(x) length(unique(x))),\n    Unique_Values = sapply(df, function(x) {\n      unique_vals <- unique(x)\n      if (length(unique_vals) > 10) {\n        paste(encodeString(as.character(unique_vals[1:10])), collapse = \", \", \"...\")\n      } else {\n        paste(encodeString(as.character(unique_vals)), collapse = \", \")\n      }\n    })\n  )\n  \n  ft <- flextable(glimpse_data) %>%\n    theme_zebra() %>%\n    set_caption(paste(\"Enhanced Data Glimpse:\", deparse(substitute(df)))) %>%\n    autofit() %>%\n    align(align = \"left\", part = \"all\") %>%\n    colformat_num(j = c(\"Rows\", \"Missing\", \"Unique\"), big.mark = \"\") %>%\n    bg(j = \"Missing\", bg = function(x) ifelse(x > 0, \"#FFF3CD\", \"transparent\")) %>%\n    bg(j = \"Unique\", bg = function(x) ifelse(x == 1, \"#FFF3CD\", \"transparent\")) %>%\n    add_footer_lines(paste(\"Data frame dimensions:\", nrow(df), \"rows ×\", ncol(df), \"columns\")) %>%\n    fontsize(size = 10, part = \"all\") %>%\n    set_table_properties(layout = \"autofit\", width = 1)\n  \n  return(ft)\n}\n\n# ------------------------------------------------------------------\n# 3. Fill missing Male counts and Unknown race counts\n# ------------------------------------------------------------------\nfill_demographic_gaps <- function(df) {\n  \"If exactly one gender or the Unknown race category is absent and\n  totals permit a residual, calculate and insert the missing count.\n  \"\n  inserts <- list()\n  \n  for (ot in unique(df$offender_type)) {\n    tot <- df %>%\n      filter(offender_type == ot,\n             variable_category == \"total\",\n             variable_detailed == \"total_profiles\",\n             value_type == \"count\")\n    \n    if (nrow(tot) == 0) next\n    \n    total <- tot$value[1]\n    \n    # gender residual ----------------------------------------------\n    g <- df %>%\n      filter(offender_type == ot,\n             variable_category == \"gender\",\n             value_type == \"count\")\n    \n    missing_gender <- setdiff(c(\"Male\", \"Female\"), unique(g$variable_detailed))\n    if (nrow(g) == 1 && length(missing_gender) == 1) {\n      inserts[[length(inserts) + 1]] <- tibble(\n        state = df$state[1],\n        offender_type = ot,\n        variable_category = \"gender\",\n        variable_detailed = missing_gender,\n        value = total - sum(g$value),\n        value_type = \"count\",\n        value_source = \"calculated\"\n      )\n    }\n    \n    # race residual -----------------------------------------------\n    r <- df %>%\n      filter(offender_type == ot,\n             variable_category == \"race\",\n             value_type == \"count\")\n    \n    if (nrow(r) > 0 && !\"Unknown\" %in% r$variable_detailed) {\n      gap <- total - sum(r$value)\n      if (gap > 0) {\n        inserts[[length(inserts) + 1]] <- tibble(\n          state = df$state[1],\n          offender_type = ot,\n          variable_category = \"race\",\n          variable_detailed = \"Unknown\",\n          value = gap,\n          value_type = \"count\",\n          value_source = \"calculated\"\n        )\n      }\n    }\n  }\n  \n  if (length(inserts) > 0) {\n    df <- bind_rows(df, bind_rows(inserts))\n  }\n  return(df)\n}\n\n# ------------------------------------------------------------------\n# 4. Construct Combined offender type if absent (add_combined)\n# ------------------------------------------------------------------\nadd_combined <- function(df) {\n  \"\n  When a state reports Convicted Offender and Arrestee counts but\n  omits Combined, create a Combined block by summing the two.\n  \"\n  if (\"Combined\" %in% df$offender_type) return(df)\n  \n  required <- c(\"Convicted Offender\", \"Arrestee\")\n  if (!all(required %in% df$offender_type)) return(df)  # cannot construct\n  \n  summed <- df %>%\n    filter(value_type == \"count\") %>%\n    group_by(variable_category, variable_detailed, value_type) %>%\n    summarise(value = sum(value), .groups = \"drop\") %>%\n    mutate(state = df$state[1],\n           offender_type = \"Combined\",\n           value_source = \"calculated\")\n  \n  return(bind_rows(df, summed))\n}\n\n# ------------------------------------------------------------------\n# 5. Derive percentages wherever only counts exist (add_percentages)\n# ------------------------------------------------------------------\nadd_percentages <- function(df) {\n  \"\n  Ensure that every gender and race row has both count and percentage\n  values, derived from the offender-type total if necessary.\n  \"\n  totals <- df %>%\n    filter(variable_category == \"total\",\n           variable_detailed == \"total_profiles\",\n           value_type == \"count\") %>%\n    select(offender_type, value) %>%\n    deframe()\n  \n  need_pct <- df %>%\n    filter(value_type == \"count\",\n           variable_category != \"total\")\n  \n  new_pct_rows <- need_pct %>%\n    rowwise() %>%\n    mutate(has_percentage = nrow(df %>%\n           filter(state == state,\n                  offender_type == offender_type,\n                  variable_category == variable_category,\n                  variable_detailed == variable_detailed,\n                  value_type == \"percentage\"))) %>%\n    filter(has_percentage == 0) %>%\n    mutate(value = round(value / totals[offender_type] * 100, 2),\n           value_type = \"percentage\",\n           value_source = \"calculated\") %>%\n    select(-has_percentage)\n  \n  if (nrow(new_pct_rows) > 0) {\n    df <- bind_rows(df, new_pct_rows)\n  }\n  return(df)\n}\n\n# ------------------------------------------------------------------\n# 6. Counts consistency checks\n# ------------------------------------------------------------------\ncounts_consistent <- function(df) {\n  \"\n  Verifies that demographic counts sum to total_profiles for each\n  offender type and category.\n  \"\n  demo_sum <- df %>%\n    filter(value_type == \"count\",\n           variable_category != \"total\") %>%\n    group_by(offender_type, variable_category) %>%\n    summarise(sum_value = sum(value), .groups = \"drop\")\n  \n  totals <- df %>%\n    filter(variable_category == \"total\",\n           variable_detailed == \"total_profiles\",\n           value_type == \"count\") %>%\n    select(offender_type, value)\n  \n  merged <- demo_sum %>%\n    left_join(totals, by = \"offender_type\") %>%\n    mutate(diff = abs(sum_value - value))\n  \n  all(merged$diff < 1e-6)\n}\n\n# ------------------------------------------------------------------\n# 7. Percentage consistency checks\n# ------------------------------------------------------------------\n\npercentages_consistent <- function(df) {\n  \"\n  Verifies that derived or reported percentages sum to 100 ± 0.5 %.\n  \"\n  result <- df %>%\n    filter(value_type == \"percentage\") %>%\n    group_by(offender_type, variable_category) %>%\n    summarise(sum_value = sum(value), .groups = \"drop\") %>%\n    mutate(consistent = abs(sum_value - 100) <= 0.5)\n  \n  all(result$consistent)\n}\n\n\n# ------------------------------------------------------------------\n# 8. Report status for each category\n# ------------------------------------------------------------------\n\n# Define columns needed for foia_combined\nreport_status <- function(df, category) {\n  values <- unique(df$value_type[df$variable_category == category])\n  \n  if (all(c(\"count\", \"percentage\") %in% values)) {\n    return(\"both\")\n  } else if (\"count\" %in% values) {\n    return(\"counts\")\n  } else if (\"percentage\" %in% values) {\n    return(\"percentages\")\n  } else {\n    return(\"neither\")\n  }\n}\n\n# ------------------------------------------------------------------\n# 9. Verify category totals\n# ------------------------------------------------------------------\n\nverify_category_totals <- function(df) {\n  # 1 pull total_profiles per offender_type\n  total_map <- df %>%\n    filter(variable_category == \"total\", \n           variable_detailed == \"total_profiles\") %>%\n    select(offender_type, value) %>%\n    deframe() %>%\n    as.list()\n  \n  # 2 sum counts by offender_type and variable_category\n  demo_sum <- df %>%\n    filter(value_type == \"count\",\n           variable_category != \"total\") %>%\n    group_by(offender_type, variable_category) %>%\n    summarise(sum_counts = sum(value, na.rm = TRUE), .groups = \"drop\")\n  \n  # 3 attach total_profiles and compute difference\n  demo_sum <- demo_sum %>%\n    mutate(total_profiles = map_dbl(offender_type, ~total_map[[.x]]),\n           difference = total_profiles - sum_counts)\n  \n  # tidy columns order\n  demo_sum %>%\n    select(offender_type, variable_category, total_profiles, \n           sum_counts, difference)\n}\n\n# ------------------------------------------------------------------\n# 10. Calculate Combined totals\n# ------------------------------------------------------------------\n\ncalculate_combined_totals <- function(df, state_name) {\n  # Get all counts\n  counts_df <- df %>%\n    filter(value_type == 'count') %>%\n    mutate(value_source = 'calculated')\n  \n  # Group by variable_category and variable_detailed, sum values\n  combined_sums <- counts_df %>%\n    group_by(variable_category, variable_detailed) %>%\n    summarise(value = sum(value, na.rm = TRUE), .groups = \"drop\")\n  \n  # Create Combined rows\n  combined_rows <- combined_sums %>%\n    mutate(state = state_name,\n           offender_type = 'Combined',\n           value_type = 'count',\n           value_source = 'calculated') %>%\n    select(all_of(COLS_NEEDED), value_source)\n  \n  return(combined_rows)\n}\n\n# ------------------------------------------------------------------\n# 11. Calculate percentages from counts\n# ------------------------------------------------------------------\n\ncalculate_percentages <- function(df_combined, state_name) {\n  # Get total profiles for each offender type\n  totals_map <- df_combined %>%\n    filter(state == state_name,\n           variable_category == 'total',\n           variable_detailed == 'total_profiles') %>%\n    select(offender_type, value) %>%\n    deframe() %>%\n    as.list()\n  \n  percentage_rows <- list()\n  \n  for (offender_type in names(totals_map)) {\n    total <- totals_map[[offender_type]]\n    \n    # Get all demographic counts\n    demo_data <- df_combined %>%\n      filter(state == state_name,\n             offender_type == !!offender_type,\n             variable_category %in% c('gender', 'race'),\n             value_type == 'count')\n    \n    if (nrow(demo_data) > 0) {\n      # Calculate percentage for each\n      demo_percentages <- demo_data %>%\n        mutate(value = round((value / total) * 100, 2),\n               value_type = 'percentage',\n               value_source = 'calculated') %>%\n        select(all_of(COLS_NEEDED), value_source)\n      \n      percentage_rows <- c(percentage_rows, list(demo_percentages))\n    }\n  }\n  \n  bind_rows(percentage_rows)\n}\n\n# ------------------------------------------------------------------\n# 12. Calculate counts from percentages\n# ------------------------------------------------------------------\n\ncalculate_counts_from_percentages <- function(df_combined, state_name) {\n  # Get total profiles for each offender type\n  totals_map <- df_combined %>%\n    filter(state == state_name,\n           variable_category == 'total',\n           variable_detailed == 'total_profiles') %>%\n    select(offender_type, value) %>%\n    deframe() %>%\n    as.list()\n  \n  count_rows <- list()\n  \n  for (offender_type in names(totals_map)) {\n    total <- totals_map[[offender_type]]\n    \n    # Get all demographic percentages\n    demo_data <- df_combined %>%\n      filter(state == state_name,\n             offender_type == !!offender_type,\n             variable_category %in% c('gender', 'race'),\n             value_type == 'percentage')\n    \n    if (nrow(demo_data) > 0) {\n      # Calculate count for each\n      demo_counts <- demo_data %>%\n        mutate(value = as.integer(round(total * (value / 100))),\n               value_type = 'count',\n               value_source = 'calculated') %>%\n        select(all_of(COLS_NEEDED), value_source)\n      \n      count_rows <- c(count_rows, list(demo_counts))\n    }\n  }\n  \n  bind_rows(count_rows)\n}\n\n# ------------------------------------------------------------------\n# 13. Standardize offender types\n# ------------------------------------------------------------------\n\nstandardize_offender_types <- function(df) {\n  replacements <- c(\n    'Offenders' = 'Convicted Offender',\n    'Convicted offenders' = 'Convicted Offender',\n    'Arrested offender' = 'Arrestee',\n    'All' = 'Combined'\n  )\n  \n  df %>%\n    mutate(offender_type = recode(offender_type, !!!replacements))\n}\n\n# ------------------------------------------------------------------\n# 14. Prepare state data for combined dataset\n# ------------------------------------------------------------------\n\nprepare_state_for_combined <- function(df, state_name) {\n  \n  df_prepared <- df %>%\n    select(any_of(COLS_NEEDED), value_source)\n  \n  df_prepared <- df_prepared %>%\n      mutate(value_source = case_when(\n        is.na(value_source) ~ \"calculated\",\n        value_source == \"\" ~ \"calculated\",\n        TRUE ~ value_source\n      ))\n\n  \n  df_prepared\n}\n\n# ------------------------------------------------------------------\n# 15. Compare reported vs calculated percentages\n# ------------------------------------------------------------------\n\nverify_percentage_consistency <- function(df_combined, state_name) {\n  state_data <- df_combined %>%\n    filter(state == state_name)\n  \n  # Get all offender types that have both counts and percentages\n  offender_types <- unique(state_data$offender_type)\n  \n  consistency_results <- list()\n  \n  for (offender_type in offender_types) {\n    offender_data <- state_data %>%\n      filter(offender_type == !!offender_type)\n    \n    # Check if we have both reported and calculated percentages\n    for (category in c('gender', 'race')) {\n      reported_pcts <- offender_data %>%\n        filter(variable_category == !!category,\n               value_type == 'percentage',\n               value_source == 'reported')\n      \n      calculated_pcts <- offender_data %>%\n        filter(variable_category == !!category,\n               value_type == 'percentage',\n               value_source == 'calculated')\n      \n      if (nrow(reported_pcts) > 0 && nrow(calculated_pcts) > 0) {\n        # Compare each demographic value\n        for (i in 1:nrow(reported_pcts)) {\n          rep_row <- reported_pcts[i, ]\n          calc_match <- calculated_pcts %>%\n            filter(variable_detailed == rep_row$variable_detailed)\n          \n          if (nrow(calc_match) > 0) {\n            diff <- abs(rep_row$value - calc_match$value[1])\n            consistency_results <- c(consistency_results, list(data.frame(\n              offender_type = offender_type,\n              category = category,\n              variable = rep_row$variable_detailed,\n              reported = rep_row$value,\n              calculated = calc_match$value[1],\n              difference = diff,\n              consistent = diff < 0.5\n            )))\n          }\n        }\n      }\n    }\n  }\n  \n  if (length(consistency_results) > 0) {\n    consistency_df <- bind_rows(consistency_results)\n    cat(paste0(\"\\nPercentage consistency check for \", state_name, \":\\n\"))\n    cat(paste0(\"All values consistent: \", all(consistency_df$consistent), \"\\n\"))\n    \n    if (!all(consistency_df$consistent)) {\n      cat(\"\\nInconsistent values:\\n\")\n      print(consistency_df %>% filter(!consistent))\n    }\n    \n    return(all(consistency_df$consistent))\n  } else {\n    # No comparison possible - state only has one type of data\n    return(TRUE)\n  }\n}\n# ------------------------------------------------------------------\n# 16. Add compact formatting for large numbers\n# ------------------------------------------------------------------\n\nformat_compact <- function(x) {\n  sapply(x, function(single_x) {\n    if (single_x >= 1000000) {\n      if (single_x/1000000 == as.integer(single_x/1000000)) {\n        return(paste0(as.integer(single_x/1000000), \"M\"))\n      } else {\n        return(paste0(round(single_x/1000000, 1), \"M\"))\n      }\n    } else if (single_x >= 1000) {\n      return(paste0(as.integer(single_x/1000), \"k\"))\n    } else {\n      return(paste0(as.integer(single_x)))\n    }\n  })\n}\n\n# ------------------------------------------------------------------\n# 17. Pie chart creation function\n# ------------------------------------------------------------------\n\ncreate_pie_chart <- function(data, offender_type, category, value_type, title, show_values = FALSE) {\n  chart_data <- data %>%\n    filter(offender_type == !!offender_type,\n           variable_category == !!category,\n           value_type == !!value_type)\n  \n  # Check if we have data after filtering\n  if (nrow(chart_data) == 0) {\n    plot.new()\n    title(main = title, cex.main = 0.9)\n    text(0.5, 0.5, \"No data\", cex = 0.8)\n    return()\n  }\n  \n  # AGGREGATE DATA TO REMOVE DUPLICATES - KEY FIX\n  chart_data <- chart_data %>%\n    group_by(variable_detailed) %>%\n    summarise(value = sum(value, na.rm = TRUE)) %>%\n    ungroup()\n  \n  # Ensure consistent categories\n  if (category == 'gender') {\n    all_genders <- data.frame(variable_detailed = c('Male', 'Female', 'Unknown'))\n    chart_data <- chart_data %>%\n      right_join(all_genders, by = \"variable_detailed\") %>%\n      mutate(value = ifelse(is.na(value), 0, value)) %>%\n      arrange(factor(variable_detailed, levels = c('Male', 'Female', 'Unknown')))\n  } else if (category == 'race') {\n    all_races <- data.frame(variable_detailed = c('White', 'Black', 'Hispanic', \n                                                 'Asian', 'Native American', 'Other', 'Unknown'))\n    chart_data <- chart_data %>%\n      right_join(all_races, by = \"variable_detailed\") %>%\n      mutate(value = ifelse(is.na(value), 0, value)) %>%\n      arrange(factor(variable_detailed, levels = c('White', 'Black', 'Hispanic', \n                                                  'Asian', 'Native American', 'Other', 'Unknown')))\n  }\n  \n  # Filter out zero values and ensure we have data\n  chart_data <- chart_data %>% filter(value > 0)\n  \n  if (nrow(chart_data) == 0) {\n    plot.new()\n    title(main = title, cex.main = 0.9)\n    text(0.5, 0.5, \"No data\", cex = 0.8)\n    return()\n  }\n  \n  # Define colors\n  if (category == 'gender') {\n    colors <- c('Male' = '#4E79A7', 'Female' = '#E15759', 'Unknown' = '#BAB0AC')\n  } else {\n    colors <- c('White' = '#4E79A7', 'Black' = '#F25E2B', 'Hispanic' = '#E14759',\n               'Asian' = '#76B7B2', 'Native American' = '#59A14F',\n               'Other' = '#9C755F', 'Unknown' = '#BAB0AC')\n  }\n  \n  # Filter colors to only include categories present in data\n  pie_colors <- colors[names(colors) %in% chart_data$variable_detailed]\n  \n  # Calculate percentages\n  total_value <- sum(chart_data$value)\n  chart_data <- chart_data %>%\n    mutate(pct = value / total_value * 100)\n  \n  # Create labels based on value_type and show_values\n  if (show_values && value_type == 'count') {\n    chart_data <- chart_data %>%\n      mutate(base_label = paste0(variable_detailed, \"\\n(\", format(value, big.mark = \",\"), \")\"))\n  } else if (value_type == 'percentage') {\n    chart_data <- chart_data %>%\n      mutate(base_label = paste0(variable_detailed, \"\\n(\", round(value, 1), \"%)\"))\n  } else {\n    chart_data <- chart_data %>%\n      mutate(base_label = variable_detailed)\n  }\n  \n  # Only show labels for slices >= 3%, otherwise empty string\n  chart_data <- chart_data %>%\n    mutate(label = ifelse(pct >= 3, base_label, \"\"))\n  \n  # Create the pie chart\n  pie(chart_data$value, \n      labels = chart_data$label,\n      main = title,\n      col = pie_colors,\n      cex.main = 0.9,\n      cex = 0.8)\n  \n  # Add legend for small slices\n  small_slices <- chart_data %>% filter(pct < 3)\n  if (nrow(small_slices) > 0) {\n    legend_labels <- paste0(small_slices$variable_detailed, \" (\", round(small_slices$pct, 1), \"%)\")\n    legend_colors <- pie_colors[small_slices$variable_detailed]\n    \n    legend(\"bottomright\", \n           legend = legend_labels,\n           fill = legend_colors,\n           cex = 0.7,\n           bty = \"n\")\n  }\n}\n\n# ------------------------------------------------------------------\n# 18. State visualizations with 2 pies per row\n# ------------------------------------------------------------------\n\ncreate_state_visualizations <- function(df_combined, state_name) {\n  state_data <- df_combined %>% filter(state == state_name)\n  \n  offender_types <- sort(unique(state_data$offender_type))\n  plots <- list()\n  \n  for (offender_type in offender_types) {\n    plots <- c(plots, list(\n      create_pie_chart(state_data, offender_type, 'gender', 'count',\n                       paste(offender_type, \"Gender Counts\"), TRUE),\n      create_pie_chart(state_data, offender_type, 'gender', 'percentage',\n                       paste(offender_type, \"Gender Percentages\")),\n      create_pie_chart(state_data, offender_type, 'race', 'count',\n                       paste(offender_type, \"Race Counts\"), TRUE),\n      create_pie_chart(state_data, offender_type, 'race', 'percentage',\n                       paste(offender_type, \"Race Percentages\"))\n    ))\n  }\n}\n\n# ------------------------------------------------------------------\n# 19. Demographic bar chart function\n# ------------------------------------------------------------------\n\ncreate_demographic_bar_charts <- function(df_combined, state_name) {\n  state_data <- df_combined %>%\n    filter(state == state_name)\n  \n  # Get offender types and ensure Combined is last\n  offender_types <- state_data %>%\n    filter(value_type == 'count') %>%\n    pull(offender_type) %>%\n    unique() %>%\n    sort()\n  \n  if ('Combined' %in% offender_types) {\n    offender_types <- c(setdiff(offender_types, 'Combined'), 'Combined')\n  }\n  \n  # Color palettes\n  gender_colors <- c('Male' = '#4E79A7', 'Female' = '#E15759', 'Unknown' = '#BAB0AC')\n  race_colors <- c(\n    'White' = '#4E79A7', \n    'Black' = '#F25E2B', \n    'Hispanic' = '#E14759',\n    'Asian' = '#76B7B2',\n    'Native American' = '#59A14F',\n    'Other' = '#9C755F',\n    'Unknown' = '#BAB0AC'\n  )\n  \n  # Gender data - ensure no duplicates by summing values\n  gender_data <- state_data %>%\n    filter(variable_category == 'gender',\n           value_type == 'count') %>%\n    group_by(offender_type, variable_detailed) %>%\n    summarize(value = sum(value, na.rm = TRUE), .groups = 'drop') %>%\n    complete(offender_type, variable_detailed = c('Male', 'Female', 'Unknown'), \n             fill = list(value = 0))\n  \n  # Race data - ensure no duplicates by summing values\n  race_data <- state_data %>%\n    filter(variable_category == 'race',\n           value_type == 'count') %>%\n    group_by(offender_type, variable_detailed) %>%\n    summarize(value = sum(value, na.rm = TRUE), .groups = 'drop') %>%\n    complete(offender_type, \n             variable_detailed = c('White', 'Black', 'Hispanic', \n                                  'Asian', 'Native American', 'Other', 'Unknown'), \n             fill = list(value = 0))\n  \n  # Create separate plots - one per row\n  par(mfrow = c(2, 1), mar = c(5, 9, 4, 9), oma = c(0, 0, 2, 0)) # Increased right margin for legend\n  \n  # Gender plot - ordered by total volume\n  gender_plot_data <- gender_data %>%\n    filter(variable_detailed %in% c('Male', 'Female', 'Unknown')) %>%\n    mutate(offender_type = factor(offender_type, levels = rev(offender_types)))\n  \n  # Order gender categories by total volume (largest at bottom)\n  gender_order <- gender_plot_data %>%\n    group_by(variable_detailed) %>%\n    summarize(total = sum(value)) %>%\n    arrange(total) %>%\n    pull(variable_detailed)\n  \n  gender_plot_data <- gender_plot_data %>%\n    mutate(variable_detailed = factor(variable_detailed, levels = gender_order))\n  \n  # Reshape for barplot\n  gender_matrix <- gender_plot_data %>%\n    pivot_wider(names_from = variable_detailed, values_from = value) %>%\n    as.data.frame() %>%\n    column_to_rownames(\"offender_type\") %>%\n    as.matrix()\n  \n  # Ensure all columns exist\n  for (gender in gender_order) {\n    if (!gender %in% colnames(gender_matrix)) {\n      gender_matrix <- cbind(gender_matrix, temp = 0)\n      colnames(gender_matrix)[ncol(gender_matrix)] <- gender\n    }\n  }\n  \n  # Reorder columns by volume\n  gender_matrix <- gender_matrix[, as.character(gender_order), drop = FALSE]\n  \n  # Format x-axis labels with \"k\" for thousands\n  max_x <- max(rowSums(gender_matrix))\n  x_breaks <- pretty(c(0, max_x))\n  x_labels <- ifelse(x_breaks >= 1000, \n                    paste0(x_breaks/1000, \"k\"), \n                    as.character(x_breaks))\n  \n  barplot(t(gender_matrix), \n          horiz = TRUE,\n          las = 1,\n          col = gender_colors[colnames(gender_matrix)],\n          main = 'Gender Distribution',\n          xlab = 'Number of Profiles',\n          xaxt = 'n',  # Remove default x-axis\n          legend.text = FALSE,  # Don't show legend in plot area\n          args.legend = list(x = \"right\", bty = \"n\", inset = c(-0.2, 0)))\n  \n  # Add custom x-axis with formatted labels\n  axis(1, at = x_breaks, labels = x_labels)\n  \n  # Add legend outside the plot area\n  legend(\"topright\", \n         legend = colnames(gender_matrix), \n         fill = gender_colors[colnames(gender_matrix)],\n         bty = \"n\", \n         xpd = TRUE,  # Allow plotting outside main area\n         inset = c(-0.25, 0),  # Move legend to the right\n         cex = 0.8)\n  \n  # Race plot - ordered by total volume\n  race_plot_data <- race_data %>%\n    mutate(offender_type = factor(offender_type, levels = rev(offender_types)))\n  \n  # Order race categories by total volume (largest at bottom)\n  race_order <- race_plot_data %>%\n    group_by(variable_detailed) %>%\n    summarize(total = sum(value)) %>%\n    arrange(total) %>%\n    pull(variable_detailed)\n  \n  race_plot_data <- race_plot_data %>%\n    mutate(variable_detailed = factor(variable_detailed, levels = race_order))\n  \n  # Reshape for barplot\n  race_matrix <- race_plot_data %>%\n    pivot_wider(names_from = variable_detailed, values_from = value) %>%\n    as.data.frame() %>%\n    column_to_rownames(\"offender_type\") %>%\n    as.matrix()\n  \n  # Ensure all columns exist\n  for (race in race_order) {\n    if (!race %in% colnames(race_matrix)) {\n      race_matrix <- cbind(race_matrix, temp = 0)\n      colnames(race_matrix)[ncol(race_matrix)] <- race\n    }\n  }\n  \n  # Reorder columns by volume\n  race_matrix <- race_matrix[, as.character(race_order), drop = FALSE]\n  \n  # Format x-axis labels with \"k\" for thousands\n  max_x_race <- max(rowSums(race_matrix))\n  x_breaks_race <- pretty(c(0, max_x_race))\n  x_labels_race <- ifelse(x_breaks_race >= 1000, \n                         paste0(x_breaks_race/1000, \"k\"), \n                         as.character(x_breaks_race))\n  \n  barplot(t(race_matrix), \n          horiz = TRUE,\n          las = 1,\n          col = race_colors[colnames(race_matrix)],\n          main = 'Race Distribution',\n          xlab = 'Number of Profiles',\n          xaxt = 'n',  # Remove default x-axis\n          legend.text = FALSE)  # Don't show legend in plot area\n  \n  # Add custom x-axis with formatted labels\n  axis(1, at = x_breaks_race, labels = x_labels_race)\n  \n  # Add legend outside the plot area\n  legend(\"topright\", \n         legend = colnames(race_matrix), \n         fill = race_colors[colnames(race_matrix)],\n         bty = \"n\", \n         xpd = TRUE,  # Allow plotting outside main area\n         inset = c(-0.25, 0),  # Move legend to the right\n         cex = 0.8)\n  \n  title(paste(state_name, \"Demographic Distribution\"), outer = TRUE, cex.main = 1.5)\n}\n\n# ------------------------------------------------------------------\n# 20. Add state's metadata\n# ------------------------------------------------------------------\n\nadd_state_metadata <- function(state_name, state_df) {\n  \n  raw_data <- state_df %>% filter(value_source == \"reported\")\n  offender_types_reported <- unique(raw_data$offender_type)\n  \n  has_unknown <- any(raw_data$variable_detailed == \"Unknown\", na.rm = TRUE)\n  has_other <- any(raw_data$variable_detailed == \"Other\", na.rm = TRUE)\n  has_crosstab <- any(raw_data$variable_category == \"gender_race\", na.rm = TRUE)\n  \n  nonstandard_terms <- any(\n    grepl(\"All|Offenders\", raw_data$offender_type, ignore.case = TRUE),\n    grepl(\"Caucasian|African American| American Indian\", raw_data$variable_detailed, ignore.case = TRUE),\n    grepl(\"flag\", raw_data$variable_detailed, ignore.case = TRUE))\n  \n  new_row <- tibble(\n    state = state_name,\n    race_data_provided = report_status(raw_data, \"race\"),\n    gender_data_provided = report_status(raw_data, \"gender\"),\n    total_profiles_provided = report_status(\n      raw_data %>% filter(variable_category == \"total\"), \"total\"\n    ),\n    convicted_offender_reported = \"Convicted Offender\" %in% offender_types_reported,\n    arrestee_reported = \"Arrestee\" %in% offender_types_reported,\n    combined_reported = \"Combined\" %in% offender_types_reported,\n    has_unknown_category = has_unknown,\n    has_other_category = has_other,\n    uses_nonstandard_terminology = nonstandard_terms,\n    provides_crosstabulation = has_crosstab,\n    counts_sum_to_total = NA,\n    percentages_sum_to_100 = NA,\n    total_calculated_combined = !(\"Combined\" %in% offender_types_reported),\n    notes = \"\"\n  )\n  \n  foia_state_metadata <<- bind_rows(foia_state_metadata, new_row)\n  \n  cat(\"✓ Metadata added for:\", state_name, \"\\n\")\n  return(invisible(TRUE))\n}\n\n# ------------------------------------------------------------------\n# 21. Function to update a state's metadata after QC checks\n# ------------------------------------------------------------------\nupdate_state_metadata <- function(state_name, \n                                  counts_ok = NA, \n                                  percentages_ok = NA, \n                                  notes_text = NULL) {\n  \n  row_index <- which(foia_state_metadata$state == state_name)\n  \n  if (length(row_index) == 0) {\n    warning(\"State not found in metadata: \", state_name)\n    return(FALSE)\n  }\n  \n  if (!is.na(counts_ok)) {\n    foia_state_metadata$counts_sum_to_total[row_index] <<- counts_ok\n  }\n  if (!is.na(percentages_ok)) {\n    foia_state_metadata$percentages_sum_to_100[row_index] <<- percentages_ok\n  }\n  if (!is.null(notes_text)) {\n    current_notes <- foia_state_metadata$notes[row_index]\n    if (current_notes == \"\") {\n      foia_state_metadata$notes[row_index] <<- notes_text\n    } else {\n      foia_state_metadata$notes[row_index] <<- paste(current_notes, notes_text, sep = \"; \")\n    }\n  }\n  \n  cat(\"✓ Metadata updated for:\", state_name, \"\\n\")\n}\n```\n:::\n\n\n## File Structure and Contents\n\n### State-Specific Files: `data/foia/intermediate/[state]_foia_data.csv`\n\n**Purpose**: Individual files for each state containing only their\nreported data.\n\n**Structure**: Long format with columns:\n\n-   `state`: State name\n-   `offender_type`: Category of individuals (Convicted Offender,\n    Arrestee, Combined, etc.)\n-   `variable_category`: Type of data (total, gender, race, gender_race)\n-   `variable_detailed`: Specific value (e.g., Male, Female, African\n    American)\n-   `value`: The reported number or percentage\n-   `value_type`: Whether value is a \"count\" or \"percentage\"\n-   `date`: Date of data snapshot, if reported\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show per-state files loading code\"}\nca_raw <- load_state(here(per_state, \"california_foia_data.csv\"))\nfl_raw <- load_state(here(per_state, \"florida_foia_data.csv\"))\nin_raw <- load_state(here(per_state, \"indiana_foia_data.csv\"))\nme_raw <- load_state(here(per_state, \"maine_foia_data.csv\"))\nnv_raw <- load_state(here(per_state, \"nevada_foia_data.csv\"))\nsd_raw <- load_state(here(per_state, \"south_dakota_foia_data.csv\"))\ntx_raw <- load_state(here(per_state, \"texas_foia_data.csv\"))\n```\n:::\n\n\n### Raw Data Characteristics\n\nThe following table summarizes the structure and content of the data as\noriginally received from each state prior to any standardization,\ncalculation, or processing.\n\n| State | Offender Types | Value Types | Total Profiles | Action Needed | Key Reporting Notes |\n|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|\n| **California** | CO, A | Counts only | Reported per offender type | Add Unknown Race, Calculate % & Combined, Standardize Terminology | Discrepancy in Race: counts \\< total profiles; Non-standard terminology (Caucasian and African American) |\n| **Florida** | COMB | Counts + % | Reported | Standardize Terminology | Non-standard terminology (Caucasian and African American) |\n| **Indiana** | CO, A, COMB | Percentage (Counts for totals only) | Reported per offender type | Calculate Counts & Total Profiles Combined, Fix % inconsistency, Standardize Terminology | Demographics only for Combined; `Other` race category as \"<1\"; Non-standard terminology (Caucasian) |\n| **Maine** | COMB | Counts + % | Reported | Solve counts and Percentage inconsistency |  |\n| **Nevada** | CO, A, COMB | Counts + % | Reported for all types | Standardize Terminology | Non-standard terminology (All, total_flags and American Indian) |\n| **South Dakota** | COMB | Counts + % | Reported | Standardize Terminology, Solve counts and % inconsistency | Includes gender×race cross-tabulation; Non-standard terminology |\n| **Texas** | CO, A | Counts only | Reported per offender type | Calculate Male counts, Solve counts inconsistency, Calculate % & Combined, Standardize Terminology| Only female gender was reported; Non-standard term (Offenders, Caucasian, and African American) |\n\n**Legend:**\n\n-   **CO:** Convicted Offender\n\n-   **AR:** Arrestee\n\n-   **COMB:** Combined Total (all profiles)\n\n-   **Counts + %:** Both raw numbers and percentages were provided\n\n## Prepare Combined Dataset\n\nThe goal of this step is to transform each state's raw data into a\nstandardized format before appending it to the master `foia_combined`\nDataFrame. This ensures consistency and enables seamless analysis across\nall seven states.\n\nThe ideal, standardized state dataset ready for combination must have\nthe following columns:\n\n| Column Name | Description | Example Values |\n|:-----------------------|:-----------------------|:-----------------------|\n| **`state`** | The name of the state. | `\"California\"`, `\"Florida\"` |\n| **`offender_type`** | The category of offender profile. | `\"Convicted Offender\"`, `\"Arrestee\"`, `\"Combined\"` |\n| **`variable_category`** | The broad demographic category. | `\"race\"`, `\"gender\"`, `\"total\"`, `\"gender_race\"` |\n| **`variable_detailed`** | The specific value within the category. | `\"White\"`, `\"Male\"`, `\"total_profiles\"`, `\"Male_White\"` |\n| **`value`** | The numerical value for the metric. | `150000`, `25.8` |\n| **`value_type`** | The type of metric the value represents. | `\"count\"`, `\"percentage\"` |\n| **`value_source`** | Whether the data was provided or derived. | `\"reported\"`, `\"calculated\"` |\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the master foia_combined dataframe elaboration code\"}\n# ------------------------------------------------------------------\n# Initialize the master foia_combined dataframe with correct schema\n# This empty structure ensures all state data is appended consistently\n# ------------------------------------------------------------------\n\nfoia_combined <- tibble( state = character(),\noffender_type = character(),\nvariable_category = character(),\nvariable_detailed = character(), \nvalue = numeric(),\nvalue_type = character(),\nvalue_source = character()\n)\n\n# Create a data dictionary for foia_combined\nschema_dict <- tribble(\n  ~Column,             ~Type,        ~Description, \n  \"state\",             \"character\",  \"'California', 'Florida'\",\n  \"offender_type\",     \"character\",  \"'Convicted Offender', 'Arrestee', 'Combined'\",\n  \"variable_category\", \"character\",  \"'race', 'gender', 'total', 'gender_race'\",\n  \"variable_detailed\", \"character\",  \"'White', 'Male', 'total_profiles', 'Male_White'\",\n  \"value\",             \"numeric\",    \"150000, 25.8\",\n  \"value_type\",        \"character\",  \"'count', 'percentage'\",\n  \"value_source\",      \"character\",  \"'reported', 'calculated'\"\n)\n\n# Turn into a nice flextable\nflextable(schema_dict) %>%\n  autofit() %>%\n  theme_booktabs() %>%\n  set_header_labels(\n    Column = \"Column Name\",\n    Type = \"Data Type\",\n    Description = \"Example Values to be added\"\n  )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-541f7f3c{}.cl-5412ece0{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-541ce5e2{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-541cf3de{width:1.491in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf3df{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf3e8{width:3.22in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf3e9{width:1.491in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf3f2{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf3f3{width:3.22in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf3f4{width:1.491in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf3fc{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf3fd{width:3.22in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf406{width:1.491in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf407{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf408{width:3.22in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf410{width:1.491in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf411{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf412{width:3.22in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf413{width:1.491in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf41a{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf41b{width:3.22in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf41c{width:1.491in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf424{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf425{width:3.22in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf426{width:1.491in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf427{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-541cf42e{width:3.22in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-541f7f3c'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-541cf3de\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">Column Name</span></p></th><th class=\"cl-541cf3df\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">Data Type</span></p></th><th class=\"cl-541cf3e8\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">Example Values to be added</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-541cf3e9\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">state</span></p></td><td class=\"cl-541cf3f2\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">character</span></p></td><td class=\"cl-541cf3f3\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">'California', 'Florida'</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-541cf3f4\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">offender_type</span></p></td><td class=\"cl-541cf3fc\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">character</span></p></td><td class=\"cl-541cf3fd\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">'Convicted Offender', 'Arrestee', 'Combined'</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-541cf406\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">variable_category</span></p></td><td class=\"cl-541cf407\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">character</span></p></td><td class=\"cl-541cf408\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">'race', 'gender', 'total', 'gender_race'</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-541cf410\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">variable_detailed</span></p></td><td class=\"cl-541cf411\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">character</span></p></td><td class=\"cl-541cf412\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">'White', 'Male', 'total_profiles', 'Male_White'</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-541cf413\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">value</span></p></td><td class=\"cl-541cf41a\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">numeric</span></p></td><td class=\"cl-541cf41b\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">150000, 25.8</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-541cf41c\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">value_type</span></p></td><td class=\"cl-541cf424\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">character</span></p></td><td class=\"cl-541cf425\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">'count', 'percentage'</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-541cf426\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">value_source</span></p></td><td class=\"cl-541cf427\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">character</span></p></td><td class=\"cl-541cf42e\"><p class=\"cl-541ce5e2\"><span class=\"cl-5412ece0\">'reported', 'calculated'</span></p></td></tr></tbody></table></div>\n```\n\n:::\n:::\n\n\n## Prepare Metadata Documentation Table\n\nThis section creates a comprehensive metadata table\n(**`foia_state_metadata`**) to document the original content and\nstructure of each state's FOIA response *before* any processing or\ncleaning was applied.\n\nThis serves as a permanent record of data provenance, ensuring\ntransparency and reproducibility by clearly distinguishing between what\nwas *provided* by the states and what was *calculated* during analysis.\n\n**Key Documentation Captured:**\n\n-   **Data Types Provided:** Whether each state reported counts,\n    percentages, or both for race, gender, and total profiles.\n\n-   **Offender Categories Reported:** Which offender types (Convicted\n    Offender, Arrestee, Combined) were originally included.\n\n-   **Demographic Granularity:** Presence of 'Unknown' or 'Other'\n    categories and gender-race cross-tabulations.\n\n-   **Terminology & Anomalies:** Use of non-standard terms (e.g.,\n    \"flags,\" \"offenders\") and other state-specific reporting notes.\n\n-   **QC Results:** Flags for whether cleaned data passes consistency\n    checks (counts sum to totals, percentages sum to \\~100%).\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the foia_state_metadata table elaboration code\"}\n# ------------------------------------------------------------------\n# Initialize the foia_state_metadata as a tibble (not a list of lists)\n# This makes it easier to add rows and ensures consistent structure.\n# ------------------------------------------------------------------\n\n# Define the full schema for our metadata table\nfoia_state_metadata <- tibble(\n  state = character(),\n  race_data_provided = character(),\n  gender_data_provided = character(),\n  total_profiles_provided = character(), \n  convicted_offender_reported = logical(),\n  arrestee_reported = logical(),\n  combined_reported = logical(),\n  has_unknown_category = logical(),\n  has_other_category = logical(),\n  uses_nonstandard_terminology = logical(),\n  provides_crosstabulation = logical(),\n  counts_sum_to_total = logical(),\n  percentages_sum_to_100 = logical(),\n  total_calculated_combined = logical(),\n  notes = character()\n)\n\n# Build data dictionary for foia_state_metadata\nschema_dict_meta <- tribble(\n  ~Column,                        ~Type,       ~Description,\n  \"state\",                        \"character\", \"State name (e.g., 'California', 'Florida')\",\n  \"race_data_provided\",           \"character\", \"Race data availability: 'counts', 'percentages', 'both', 'none'\",\n  \"gender_data_provided\",         \"character\", \"Gender data availability: 'counts', 'percentages', 'both', 'none'\",\n  \"total_profiles_provided\",      \"character\", \"Total profiles availability: 'counts', 'percentages', 'both', 'none'\",\n  \"convicted_offender_reported\",  \"logical\",   \"Was convicted offender data reported?\",\n  \"arrestee_reported\",            \"logical\",   \"Was arrestee data reported?\",\n  \"combined_reported\",            \"logical\",   \"Was combined category reported?\",\n  \"has_unknown_category\",         \"logical\",   \"Does the state include 'Unknown' category?\",\n  \"has_other_category\",           \"logical\",   \"Does the state include 'Other' category?\",\n  \"uses_nonstandard_terminology\", \"logical\",   \"Does the state use non-standard terms?\",\n  \"provides_crosstabulation\",     \"logical\",   \"Does the state provide crosstabs (e.g., gender x race)?\",\n  \"counts_sum_to_total\",          \"logical\",   \"Do reported counts sum to the total?\",\n  \"percentages_sum_to_100\",       \"logical\",   \"Do reported percentages sum to ~100%?\",\n  \"total_calculated_combined\",    \"logical\",   \"Did we calculate combined total manually?\",\n  \"notes\",                        \"character\", \"Free-text notes for state-specific caveats\"\n)\n\n# Render with flextable\nflextable(schema_dict_meta) %>%\n  autofit() %>%\n  theme_booktabs() %>%\n  set_header_labels(\n    Column = \"Column Name\",\n    Type = \"Data Type\",\n    Description = \"Meaning\"\n  )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-542c9d52{}.cl-5429b268{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-542ad77e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-542ae430{width:2.417in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae431{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae43a{width:4.408in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae444{width:2.417in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae445{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae44e{width:4.408in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae44f{width:2.417in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae450{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae451{width:4.408in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae458{width:2.417in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae459{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae45a{width:4.408in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae462{width:2.417in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae463{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae464{width:4.408in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae46c{width:2.417in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae46d{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae46e{width:4.408in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae46f{width:2.417in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae476{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae477{width:4.408in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae480{width:2.417in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae481{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-542ae482{width:4.408in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-542c9d52'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-542ae430\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Column Name</span></p></th><th class=\"cl-542ae431\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Data Type</span></p></th><th class=\"cl-542ae43a\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Meaning</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae444\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">state</span></p></td><td class=\"cl-542ae445\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">character</span></p></td><td class=\"cl-542ae44e\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">State name (e.g., 'California', 'Florida')</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae44f\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">race_data_provided</span></p></td><td class=\"cl-542ae450\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">character</span></p></td><td class=\"cl-542ae451\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Race data availability: 'counts', 'percentages', 'both', 'none'</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae444\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">gender_data_provided</span></p></td><td class=\"cl-542ae445\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">character</span></p></td><td class=\"cl-542ae44e\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Gender data availability: 'counts', 'percentages', 'both', 'none'</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae458\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">total_profiles_provided</span></p></td><td class=\"cl-542ae459\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">character</span></p></td><td class=\"cl-542ae45a\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Total profiles availability: 'counts', 'percentages', 'both', 'none'</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae462\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">convicted_offender_reported</span></p></td><td class=\"cl-542ae463\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">logical</span></p></td><td class=\"cl-542ae464\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Was convicted offender data reported?</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae462\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">arrestee_reported</span></p></td><td class=\"cl-542ae463\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">logical</span></p></td><td class=\"cl-542ae464\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Was arrestee data reported?</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae46c\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">combined_reported</span></p></td><td class=\"cl-542ae46d\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">logical</span></p></td><td class=\"cl-542ae46e\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Was combined category reported?</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae46c\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">has_unknown_category</span></p></td><td class=\"cl-542ae46d\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">logical</span></p></td><td class=\"cl-542ae46e\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Does the state include 'Unknown' category?</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae444\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">has_other_category</span></p></td><td class=\"cl-542ae445\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">logical</span></p></td><td class=\"cl-542ae44e\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Does the state include 'Other' category?</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae44f\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">uses_nonstandard_terminology</span></p></td><td class=\"cl-542ae450\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">logical</span></p></td><td class=\"cl-542ae451\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Does the state use non-standard terms?</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae46f\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">provides_crosstabulation</span></p></td><td class=\"cl-542ae476\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">logical</span></p></td><td class=\"cl-542ae477\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Does the state provide crosstabs (e.g., gender x race)?</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae462\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">counts_sum_to_total</span></p></td><td class=\"cl-542ae463\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">logical</span></p></td><td class=\"cl-542ae464\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Do reported counts sum to the total?</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae46c\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">percentages_sum_to_100</span></p></td><td class=\"cl-542ae46d\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">logical</span></p></td><td class=\"cl-542ae46e\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Do reported percentages sum to ~100%?</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae44f\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">total_calculated_combined</span></p></td><td class=\"cl-542ae450\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">logical</span></p></td><td class=\"cl-542ae451\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Did we calculate combined total manually?</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-542ae480\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">notes</span></p></td><td class=\"cl-542ae481\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">character</span></p></td><td class=\"cl-542ae482\"><p class=\"cl-542ad77e\"><span class=\"cl-5429b268\">Free-text notes for state-specific caveats</span></p></td></tr></tbody></table></div>\n```\n\n:::\n:::\n\n\n# State-by-state Standardization\n\nEach state is processed individually to standardize terminology, fill\ngaps, and calculate Combined totals where necessary.\n\n## California (CA)\n\n**Overview**: California supplies **counts only** for gender and race\nplus a separate total for each offender type; no percentages are\nreported.\n\n### Examine Raw Data\n\nEstablish a baseline understanding of the data exactly as it was\nreceived.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-543fd494{table-layout:auto;width:100%;}.cl-543c7bc8{font-family:'Helvetica';font-size:10pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-543c7bd2{font-family:'Helvetica';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-543e095c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-543e153c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1546{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1547{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1548{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1549{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e154a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1550{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1551{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1552{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1553{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1554{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e155a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e155b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e155c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e155d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e155e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e155f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1564{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1565{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1566{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1567{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1568{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1569{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e156e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e156f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1570{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1571{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1572{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1573{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1578{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1579{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e157a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e157b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e157c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1582{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1583{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1584{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1585{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1586{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1587{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e158c{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e158d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e158e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e158f{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1590{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1596{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1597{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1598{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e1599{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e159a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e159b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e15a0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e15a1{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543e15a2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-543fd494'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-543e153c\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bc8\">Column</span></p></th><th class=\"cl-543e1546\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bc8\">Type</span></p></th><th class=\"cl-543e1547\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bc8\">Rows</span></p></th><th class=\"cl-543e1548\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bc8\">Missing</span></p></th><th class=\"cl-543e1549\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bc8\">Unique</span></p></th><th class=\"cl-543e154a\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bc8\">Unique_Values</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-543e1550\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">state</span></p></td><td class=\"cl-543e1551\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">character</span></p></td><td class=\"cl-543e1552\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">16</span></p></td><td class=\"cl-543e1553\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">0</span></p></td><td class=\"cl-543e1554\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">1</span></p></td><td class=\"cl-543e155a\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">California</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-543e155b\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">offender_type</span></p></td><td class=\"cl-543e155c\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">character</span></p></td><td class=\"cl-543e155d\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">16</span></p></td><td class=\"cl-543e155e\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">0</span></p></td><td class=\"cl-543e155f\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">2</span></p></td><td class=\"cl-543e1564\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">Convicted Offender, Arrestee</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-543e1565\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">variable_category</span></p></td><td class=\"cl-543e1566\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">character</span></p></td><td class=\"cl-543e1567\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">16</span></p></td><td class=\"cl-543e1568\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">0</span></p></td><td class=\"cl-543e1569\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">3</span></p></td><td class=\"cl-543e156e\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">total, gender, race</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-543e156f\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">variable_detailed</span></p></td><td class=\"cl-543e1570\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">character</span></p></td><td class=\"cl-543e1571\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">16</span></p></td><td class=\"cl-543e1572\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">0</span></p></td><td class=\"cl-543e1573\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">8</span></p></td><td class=\"cl-543e1578\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">total_profiles, Female, Male, Unknown, African American, Caucasian, Hispanic, Asian</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-543e1579\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">value</span></p></td><td class=\"cl-543e157a\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">numeric</span></p></td><td class=\"cl-543e157b\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">16</span></p></td><td class=\"cl-543e157c\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">0</span></p></td><td class=\"cl-543e1582\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">16</span></p></td><td class=\"cl-543e1583\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">2019899 ..., 751822 ..., 309827 ..., 1603222 ..., 106850 ..., 208225 ..., 524231 ..., 19366 ..., 368952 ..., 588555 ...</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-543e1584\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">value_type</span></p></td><td class=\"cl-543e1585\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">character</span></p></td><td class=\"cl-543e1586\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">16</span></p></td><td class=\"cl-543e1587\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">0</span></p></td><td class=\"cl-543e158c\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">1</span></p></td><td class=\"cl-543e158d\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">count</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-543e158e\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">value_source</span></p></td><td class=\"cl-543e158f\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">character</span></p></td><td class=\"cl-543e1590\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">16</span></p></td><td class=\"cl-543e1596\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">0</span></p></td><td class=\"cl-543e1597\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">1</span></p></td><td class=\"cl-543e1598\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">reported</span></p></td></tr></tbody><tfoot><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"6\"class=\"cl-543e1599\"><p class=\"cl-543e095c\"><span class=\"cl-543c7bd2\">Data frame dimensions: 16 rows × 7 columns</span></p></td></tr></tfoot></table></div>\n```\n\n:::\n:::\n\n\n### Verify Data Consistency\n\nRuns the first quality check using the **`verify_category_totals()`**\nand **`counts_consistent()`** functions.\n\nThis identifies any immediate discrepancies, such as the sum of\ndemographic counts not matching the reported total profiles, which flags\ndata issues that need to be resolved.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nVerifying that demographic counts match reported totals:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> offender_type </th>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> total_profiles </th>\n   <th style=\"text-align:right;\"> sum_counts </th>\n   <th style=\"text-align:right;\"> difference </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Arrestee </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 751822 </td>\n   <td style=\"text-align:right;\"> 751822 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Arrestee </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 751822 </td>\n   <td style=\"text-align:right;\"> 655695 </td>\n   <td style=\"text-align:right;\"> 96127 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Convicted Offender </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 2019899 </td>\n   <td style=\"text-align:right;\"> 2019899 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Convicted Offender </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 2019899 </td>\n   <td style=\"text-align:right;\"> 1626012 </td>\n   <td style=\"text-align:right;\"> 393887 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCounts consistency check on raw data:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll counts consistent: FALSE \n```\n\n\n:::\n:::\n\n\n### Address Data Gaps\n\n#### Create Unknown Category\n\n> *\"Racial classification is not considered a required field on the\n> collection card; thus, an unknown number of offenders may have **no\n> racial classification listed**.\"* — California DOJ FOIA letter, July\n> 10 2018 (**`raw/foia_pdfs/FOIA_RacialComp_California.pdf`**)\n\nThe 393,887 Convicted Offender profiles and 96,127 Arrestee profiles\nthat do **not** appear in any of the four reported race categories must\nbelong to an unreported \"Unknown\" category.\n\nThe calculated values are added with a **`value_source = \"calculated\"`**\ntag to maintain transparency about what was provided versus what was\nderived.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show unknown addition code\"}\n# Start with the raw data\nca_clean <- ca_raw\n\n# Add Unknown race category to reconcile totals\nca_clean <- fill_demographic_gaps(ca_clean)\n\n# Verify the fix\ncat(\"Category totals after adding Unknown race category:\\n\")\nverify_category_totals(ca_clean) %>% kable() %>% kable_styling()\n\ncat(\"\\nCounts consistency after adding Unknown:\\n\")\ncat(paste(\"All counts consistent:\", counts_consistent(ca_clean), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCategory totals after adding Unknown race category:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> offender_type </th>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> total_profiles </th>\n   <th style=\"text-align:right;\"> sum_counts </th>\n   <th style=\"text-align:right;\"> difference </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Arrestee </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 751822 </td>\n   <td style=\"text-align:right;\"> 751822 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Arrestee </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 751822 </td>\n   <td style=\"text-align:right;\"> 751822 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Convicted Offender </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 2019899 </td>\n   <td style=\"text-align:right;\"> 2019899 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Convicted Offender </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 2019899 </td>\n   <td style=\"text-align:right;\"> 2019899 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCounts consistency after adding Unknown:\nAll counts consistent: TRUE \n```\n\n\n:::\n:::\n\n\n#### Create Combined Totals\n\nSince California only reported data for \"Convicted Offender\" and\n\"Arrestee\" separately.\n\nThis step uses the **`add_combined()`** helper function to calculate a\nnew \"Combined\" offender type by summing the counts from the other two\ncategories.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show combined addition code\"}\n# Calculate Combined totals using helper function\nca_clean <- add_combined(ca_clean)\n\ncat(\"✓ Created Combined totals for California\\n\")\n\n# Show the Combined total\ncombined_total <- ca_clean %>%\n  filter(offender_type == \"Combined\",\n         variable_category == \"total\",\n         variable_detailed == \"total_profiles\") %>%\n  pull(value)\n\ncat(paste(\"Combined total profiles:\", format(combined_total, big.mark = \",\"), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Created Combined totals for California\nCombined total profiles: 2,771,721 \n```\n\n\n:::\n:::\n\n\n#### Calculate Percentages\n\nTransforms the data from counts into percentages for comparative\nanalysis.\n\nThe **`add_percentages()`** helper function calculates each demographic\ngroup's proportion relative to its offender type's total.\n\nA final consistency check ensures all percentages logically sum to\napproximately 100%.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show percentage calculation code\"}\n# Derive percentages from counts\nca_clean <- add_percentages(ca_clean)\n\ncat(\"✓ Added percentages for all demographic categories\\n\")\n\n# Check percentage consistency\ncat(\"Percentage consistency check:\\n\")\ncat(paste(\"All percentages sum to ~100%:\", percentages_consistent(ca_clean), \"\\n\\n\"))\n\n# Show current data availability\ncat(\"Final data availability:\\n\")\ncat(paste(\"Race data:\", report_status(ca_clean, \"race\"), \"\\n\"))\ncat(paste(\"Gender data:\", report_status(ca_clean, \"gender\"), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Added percentages for all demographic categories\nPercentage consistency check:\nAll percentages sum to ~100%: TRUE \n\nFinal data availability:\nRace data: both \nGender data: both \n```\n\n\n:::\n:::\n\n\n#### Standardize Terminology\n\nCalifornia uses \"African American\" instead of \"Black\" and \"Caucasian\"\ninstead of \"White\".\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show terminology standardization code\"}\n# Standardize racial terminology\nca_clean <- ca_clean %>%\n  mutate(variable_detailed = case_when(\n    variable_detailed == \"African American\" ~ \"Black\",\n    TRUE ~ variable_detailed\n  ))\n\ncat(\"✓ Standardized terminology: 'African American' → 'Black'\\n\")\n\nca_clean <- ca_clean %>%\n  mutate(variable_detailed = case_when(\n    variable_detailed == \"Caucasian\" ~ \"White\",\n    TRUE ~ variable_detailed\n  ))\n\ncat(\"✓ Standardized terminology: 'Caucasian' → 'White'\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Standardized terminology: 'African American' → 'Black'\n✓ Standardized terminology: 'Caucasian' → 'White'\n```\n\n\n:::\n:::\n\n\n### Prepare for Combined Dataset\n\nThe cleaned data is formatted to match the master schema and appended to\nthe `foia_combined` dataframe.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show California data preparation to combined dataset\"}\n# Prepare the cleaned data for the combined dataset\nca_prepared <- prepare_state_for_combined(ca_clean, \"California\")\n\n# Append to the master combined dataframe\nfoia_combined <- bind_rows(foia_combined, ca_prepared)\n\ncat(paste0(\"✓ Appended \", nrow(ca_prepared), \" California rows to foia_combined\\n\"))\ncat(paste0(\"✓ Total rows in foia_combined: \", nrow(foia_combined), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Appended 51 California rows to foia_combined\n✓ Total rows in foia_combined: 51\n```\n\n\n:::\n:::\n\n\n### Document Metadata\n\nThe metadata is added with the raw information and updated with the\nresults of the quality checks and a note on the processing steps taken.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show California data preparation and addition to metadata table\"}\n# Add California to the metadata table using the helper function\nadd_state_metadata(\"California\", ca_raw)\n\n# Update metadata with QC results\nupdate_state_metadata(\"California\", \n                      counts_ok = counts_consistent(ca_clean),\n                      percentages_ok = percentages_consistent(ca_clean),\n                      notes_text = \"Added Unknown race category to reconcile totals; calculated Combined totals and all percentages\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Metadata added for: California \n✓ Metadata updated for: California \n```\n\n\n:::\n:::\n\n\n### Visualizations\n\n\n::: {.cell}\n::: {.cell-output-display}\n![California DNA Database Demographic Distributions](foia_processing_files/figure-html/ca-visualizations-1.png){width=768}\n:::\n\n::: {.cell-output-display}\n![California DNA Database Demographic Distributions](foia_processing_files/figure-html/ca-visualizations-2.png){width=768}\n:::\n\n::: {.cell-output-display}\n![California DNA Database Demographic Distributions](foia_processing_files/figure-html/ca-visualizations-3.png){width=768}\n:::\n\n::: {.cell-output-display}\n![California DNA Database Demographic Distributions](foia_processing_files/figure-html/ca-visualizations-4.png){width=768}\n:::\n\n::: {.cell-output-display}\n![California DNA Database Demographic Distributions](foia_processing_files/figure-html/ca-visualizations-5.png){width=768}\n:::\n\n::: {.cell-output-display}\n![California DNA Database Demographic Distributions](foia_processing_files/figure-html/ca-visualizations-6.png){width=768}\n:::\n\n::: {.cell-output-display}\n![California DNA Database Demographic Distributions](foia_processing_files/figure-html/ca-visualizations-7.png){width=768}\n:::\n\n::: {.cell-output-display}\n![California DNA Database Demographic Distributions](foia_processing_files/figure-html/ca-visualizations-8.png){width=768}\n:::\n\n::: {.cell-output-display}\n![California DNA Database Demographic Distributions](foia_processing_files/figure-html/ca-visualizations-9.png){width=768}\n:::\n\n::: {.cell-output-display}\n![California DNA Database Demographic Distributions](foia_processing_files/figure-html/ca-visualizations-10.png){width=768}\n:::\n\n::: {.cell-output-display}\n![California DNA Database Demographic Distributions](foia_processing_files/figure-html/ca-visualizations-11.png){width=768}\n:::\n\n::: {.cell-output-display}\n![California DNA Database Demographic Distributions](foia_processing_files/figure-html/ca-visualizations-12.png){width=768}\n:::\n:::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![California Demographic Distributions by Offender Type](foia_processing_files/figure-html/ca-bar-charts-1.png){width=768}\n:::\n:::\n\n\n### Summary Statistics\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the summary statistics code\"}\ncat(\"California DNA Database Summary:\\n\")\ncat(\"=\", strrep(\"=\", 40), \"\\n\")\n\n# Total profiles by offender type\ntotals <- foia_combined %>%\n  filter(state == \"California\",\n         variable_category == \"total\",\n         variable_detailed == \"total_profiles\",\n         value_type == \"count\") %>%\n  select(offender_type, value) %>%\n  mutate(value_formatted = format(value, big.mark = \",\"))\n\nprint(totals)\n\n# Data completeness\ncat(\"\\nData completeness:\\n\")\ncompleteness <- foia_combined %>%\n  filter(state == \"California\") %>%\n  group_by(offender_type, value_source) %>%\n  summarise(n_values = n(), .groups = \"drop\")\n\nprint(completeness)\n\n# Final verification\ncat(\"\\nFinal verification:\\n\")\ncat(paste(\"Counts consistent:\", counts_consistent(foia_combined %>% filter(state == \"California\")), \"\\n\"))\ncat(paste(\"Percentages consistent:\", percentages_consistent(foia_combined %>% filter(state == \"California\")), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCalifornia DNA Database Summary:\n= ======================================== \n# A tibble: 3 × 3\n  offender_type        value value_formatted\n  <chr>                <dbl> <chr>          \n1 Convicted Offender 2019899 \"2,019,899\"    \n2 Arrestee            751822 \"  751,822\"    \n3 Combined           2771721 \"2,771,721\"    \n\nData completeness:\n# A tibble: 5 × 3\n  offender_type      value_source n_values\n  <chr>              <chr>           <int>\n1 Arrestee           calculated          9\n2 Arrestee           reported            8\n3 Combined           calculated         17\n4 Convicted Offender calculated          9\n5 Convicted Offender reported            8\n\nFinal verification:\nCounts consistent: TRUE \nPercentages consistent: TRUE \n```\n\n\n:::\n:::\n\n\n### Summary of California Processing\n\nCalifornia data processing complete. The dataset now includes:\n\n-   ✅ **Reported data**: Counts for Convicted Offender and Arrestee\n\n-   ✅ **Calculated additions**:\n\n    -   Unknown race category to reconcile reported totals\n\n    -   Combined totals across all offender types\n\n    -   Percentage values for all demographic categories\n\n    -   \"Caucasian\" and \"African American\" converted to \"White\" and\n        \"Black\".\n\n-   ✅ **Quality checks**: All counts and percentages pass consistency\n    validation\n\n-   ✅ **Provenance tracking**: All values include appropriate\n    **`value_source`** indicators\n\nThe California data is now standardized and ready for cross-state\nanalysis.\n\n## Florida (FL)\n\n**Overview**: Florida provides **both counts and percentages** for\ngender and race categories and already includes a \"Combined\" total for\nall offender types, making it one of the most complete and\nstraightforward datasets.\n\nOnly requires to standardize terminology for gender and race categories\nto match the common data model.\n\n### Examine Raw Data\n\nEstablish a baseline understanding of the data exactly as it was\nreceived.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-54d61ecc{table-layout:auto;width:100%;}.cl-54d288d4{font-family:'Helvetica';font-size:10pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-54d288de{font-family:'Helvetica';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-54d444a8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-54d451aa{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451b4{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451b5{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451b6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451b7{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451be{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451bf{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451c0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451c1{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451c8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451c9{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451ca{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451cb{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451cc{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451d2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451d3{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451dc{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451dd{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451de{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451df{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451e0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451e6{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451e7{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451e8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451e9{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451f0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451f1{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451f2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451f3{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451fa{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451fb{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451fc{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451fd{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d451fe{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d45204{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d45205{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d45206{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d4520e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d4520f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d45210{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d45218{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d45219{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d4521a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d4521b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d4521c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d45222{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d45223{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d45224{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d45225{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d4522c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d4522d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d4522e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d4522f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-54d45236{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-54d61ecc'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-54d451aa\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288d4\">Column</span></p></th><th class=\"cl-54d451b4\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288d4\">Type</span></p></th><th class=\"cl-54d451b5\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288d4\">Rows</span></p></th><th class=\"cl-54d451b6\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288d4\">Missing</span></p></th><th class=\"cl-54d451b7\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288d4\">Unique</span></p></th><th class=\"cl-54d451be\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288d4\">Unique_Values</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-54d451bf\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">state</span></p></td><td class=\"cl-54d451c0\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">character</span></p></td><td class=\"cl-54d451c1\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">22</span></p></td><td class=\"cl-54d451c8\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">0</span></p></td><td class=\"cl-54d451c9\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">1</span></p></td><td class=\"cl-54d451ca\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">Florida</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-54d451cb\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">offender_type</span></p></td><td class=\"cl-54d451cc\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">character</span></p></td><td class=\"cl-54d451d2\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">22</span></p></td><td class=\"cl-54d451d3\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">0</span></p></td><td class=\"cl-54d451dc\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">1</span></p></td><td class=\"cl-54d451dd\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">Combined</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-54d451de\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">variable_category</span></p></td><td class=\"cl-54d451df\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">character</span></p></td><td class=\"cl-54d451e0\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">22</span></p></td><td class=\"cl-54d451e6\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">0</span></p></td><td class=\"cl-54d451e7\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">3</span></p></td><td class=\"cl-54d451e8\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">total, gender, race</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-54d451e9\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">variable_detailed</span></p></td><td class=\"cl-54d451f0\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">character</span></p></td><td class=\"cl-54d451f1\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">22</span></p></td><td class=\"cl-54d451f2\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">0</span></p></td><td class=\"cl-54d451f3\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">10</span></p></td><td class=\"cl-54d451fa\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">total_profiles, Female, Male, Unknown, African American, Asian, Caucasian, Hispanic, Native American, Other</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-54d451fb\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">value</span></p></td><td class=\"cl-54d451fc\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">numeric</span></p></td><td class=\"cl-54d451fd\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">22</span></p></td><td class=\"cl-54d451fe\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">0</span></p></td><td class=\"cl-54d45204\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">22</span></p></td><td class=\"cl-54d45205\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">1175391 ..., 100 ..., 260885 ..., 22.2 ..., 901126 ..., 76.67 ..., 13380 ..., 1.14 ..., 413733 ..., 35.2 ...</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-54d45206\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">value_type</span></p></td><td class=\"cl-54d4520e\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">character</span></p></td><td class=\"cl-54d4520f\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">22</span></p></td><td class=\"cl-54d45210\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">0</span></p></td><td class=\"cl-54d45218\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">2</span></p></td><td class=\"cl-54d45219\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">count, percentage</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-54d4521a\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">value_source</span></p></td><td class=\"cl-54d4521b\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">character</span></p></td><td class=\"cl-54d4521c\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">22</span></p></td><td class=\"cl-54d45222\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">0</span></p></td><td class=\"cl-54d45223\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">1</span></p></td><td class=\"cl-54d45224\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">reported</span></p></td></tr></tbody><tfoot><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"6\"class=\"cl-54d45225\"><p class=\"cl-54d444a8\"><span class=\"cl-54d288de\">Data frame dimensions: 22 rows × 7 columns</span></p></td></tr></tfoot></table></div>\n```\n\n:::\n:::\n\n\n### Verify Data Consistency\n\nRuns the first quality check using the **`Verify_category_totals()`**\nand **`counts_consistent()`** functions.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nVerifying that demographic counts match reported totals:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> offender_type </th>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> total_profiles </th>\n   <th style=\"text-align:right;\"> sum_counts </th>\n   <th style=\"text-align:right;\"> difference </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 1175391 </td>\n   <td style=\"text-align:right;\"> 1175391 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 1175391 </td>\n   <td style=\"text-align:right;\"> 1175391 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCounts consistency check on raw data:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll counts consistent: TRUE \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nPercentage consistency check on raw data:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll percentages sum to ~100%: TRUE \n```\n\n\n:::\n:::\n\n\n### Address Data Gaps\n\n#### Standardize Terminology\n\nFlorida uses \"African American\" instead of \"Black\" and \"Caucasian\"\ninstead of \"White\".\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show terminology standardization code\"}\nfl_clean <- fl_raw\n\n# Standardize racial terminology\nfl_clean <- fl_clean %>%\n  mutate(variable_detailed = case_when(\n    variable_detailed == \"African American\" ~ \"Black\",\n    TRUE ~ variable_detailed\n  ))\n\ncat(\"✓ Standardized terminology: 'African American' → 'Black'\\n\")\n\nfl_clean <- fl_clean %>%\n  mutate(variable_detailed = case_when(\n    variable_detailed == \"Caucasian\" ~ \"White\",\n    TRUE ~ variable_detailed\n  ))\n\ncat(\"✓ Standardized terminology: 'Caucasian' → 'White'\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Standardized terminology: 'African American' → 'Black'\n✓ Standardized terminology: 'Caucasian' → 'White'\n```\n\n\n:::\n:::\n\n\n### Prepare for Combined Dataset\n\nThe Florida data is already complete and consistent. It is formatted to\nmatch the master schema and appended to the `foia_combined` dataframe.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show Florida data preparation to combined dataset\"}\n# Prepare the data for the combined dataset\nfl_prepared <- prepare_state_for_combined(fl_clean, \"Florida\")\n\n# Append to the master combined dataframe\nfoia_combined <- bind_rows(foia_combined, fl_prepared)\n\ncat(paste0(\"✓ Appended \", nrow(fl_prepared), \" Florida rows to foia_combined\\n\"))\ncat(paste0(\"✓ Total rows in foia_combined: \", nrow(foia_combined), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Appended 22 Florida rows to foia_combined\n✓ Total rows in foia_combined: 73\n```\n\n\n:::\n:::\n\n\n### Document Metadata\n\nThe metadata is added with a note that the data was complete and\nrequired no processing.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show Florida data preparation and addition to metadata table\"}\n# Add Florida to the metadata table using the helper function\nadd_state_metadata(\"Florida\", fl_raw)\n\n# Update metadata with QC results\nupdate_state_metadata(\"Florida\", \n                      counts_ok = counts_consistent(fl_clean),\n                      percentages_ok = percentages_consistent(fl_clean),\n                      notes_text = \"Complete dataset provided. No processing or calculations required. All values are reported.\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Metadata added for: Florida \n✓ Metadata updated for: Florida \n```\n\n\n:::\n:::\n\n\n### Visualizations\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Florida DNA Database Demographic Distributions](foia_processing_files/figure-html/fl-visualizations-1.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Florida DNA Database Demographic Distributions](foia_processing_files/figure-html/fl-visualizations-2.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Florida DNA Database Demographic Distributions](foia_processing_files/figure-html/fl-visualizations-3.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Florida DNA Database Demographic Distributions](foia_processing_files/figure-html/fl-visualizations-4.png){width=768}\n:::\n:::\n\n\n### Summary Statistics\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the summary statistics code\"}\ncat(\"Florida DNA Database Summary:\\n\")\ncat(\"=\", strrep(\"=\", 40), \"\\n\")\n\n# Total profiles by offender type\ntotals <- foia_combined %>%\n  filter(state == \"Florida\",\n         variable_category == \"total\",\n         variable_detailed == \"total_profiles\",\n         value_type == \"count\") %>%\n  select(offender_type, value) %>%\n  mutate(value_formatted = format(value, big.mark = \",\"))\n\nprint(totals)\n\n# Data completeness\ncat(\"\\nData completeness:\\n\")\ncompleteness <- foia_combined %>%\n  filter(state == \"Florida\") %>%\n  group_by(offender_type, value_source) %>%\n  summarise(n_values = n(), .groups = \"drop\")\n\nprint(completeness)\n\n# Final verification\ncat(\"\\nFinal verification:\\n\")\ncat(paste(\"Counts consistent:\", counts_consistent(foia_combined %>% filter(state == \"Florida\")), \"\\n\"))\ncat(paste(\"Percentages consistent:\", percentages_consistent(foia_combined %>% filter(state == \"Florida\")), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nFlorida DNA Database Summary:\n= ======================================== \n# A tibble: 1 × 3\n  offender_type   value value_formatted\n  <chr>           <dbl> <chr>          \n1 Combined      1175391 1,175,391      \n\nData completeness:\n# A tibble: 1 × 3\n  offender_type value_source n_values\n  <chr>         <chr>           <int>\n1 Combined      reported           22\n\nFinal verification:\nCounts consistent: TRUE \nPercentages consistent: TRUE \n```\n\n\n:::\n:::\n\n\n### Summary of Florida Processing\n\nFlorida data processing complete. The dataset is exemplary and required\nno adjustments:\n\n-   ✅ **Reported data**: Both **counts and percentages** for all\n    Convicted Offender, Arrestee, and Combined categories.\n\n-   ✅ **Terminology standardization**: \"Caucasian\" and \"African\n    American\" converted to \"White\" and \"Black\".\n\n-   ✅ **No calculated additions needed**: All values are sourced\n    directly from the state report (**`value_source = \"reported\"`**).\n\n-   ✅ **Quality checks**: All counts and percentages pass consistency\n    validation.\n\n-   ✅ **Provenance tracking**: All values maintain their original\n    **`value_source`** as \"reported\".\n\nThe Florida data is now standardized and ready for cross-state analysis.\n\n## Indiana (IN)\n\n**Overview**: Indiana presents a unique reporting pattern where total\ncounts are provided by offender type, but demographic breakdowns are\ngiven only as percentages for the Combined total.\n\nValues were provided as strings, including a \"\\<1\" notation, requiring\nconversion.\n\n### Examine Raw Data\n\nEstablish a baseline understanding of the data exactly as it was\nreceived.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-550d00b8{table-layout:auto;width:100%;}.cl-550967f0{font-family:'Helvetica';font-size:10pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-550967fa{font-family:'Helvetica';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-550aa07a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-550aad18{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad22{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad23{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad24{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad25{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad2c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad2d{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad2e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad36{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad37{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad38{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad40{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad41{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad42{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad4a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad4b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad4c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad54{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad55{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad56{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad5e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad5f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad68{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad69{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad6a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad72{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad73{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad74{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad7c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad7d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad7e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad7f{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad86{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad87{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad88{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad90{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad91{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad92{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad9a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad9b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aad9c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aada4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aada5{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aada6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aadae{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aadaf{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aadb0{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aadb1{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aadb8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aadb9{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aadba{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aadc2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aadc3{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-550aadc4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-550d00b8'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-550aad18\"><p class=\"cl-550aa07a\"><span class=\"cl-550967f0\">Column</span></p></th><th class=\"cl-550aad22\"><p class=\"cl-550aa07a\"><span class=\"cl-550967f0\">Type</span></p></th><th class=\"cl-550aad23\"><p class=\"cl-550aa07a\"><span class=\"cl-550967f0\">Rows</span></p></th><th class=\"cl-550aad24\"><p class=\"cl-550aa07a\"><span class=\"cl-550967f0\">Missing</span></p></th><th class=\"cl-550aad25\"><p class=\"cl-550aa07a\"><span class=\"cl-550967f0\">Unique</span></p></th><th class=\"cl-550aad2c\"><p class=\"cl-550aa07a\"><span class=\"cl-550967f0\">Unique_Values</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-550aad2d\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">state</span></p></td><td class=\"cl-550aad2e\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">character</span></p></td><td class=\"cl-550aad36\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">8</span></p></td><td class=\"cl-550aad37\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">0</span></p></td><td class=\"cl-550aad38\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">1</span></p></td><td class=\"cl-550aad40\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">Indiana</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-550aad41\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">offender_type</span></p></td><td class=\"cl-550aad42\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">character</span></p></td><td class=\"cl-550aad4a\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">8</span></p></td><td class=\"cl-550aad4b\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">0</span></p></td><td class=\"cl-550aad4c\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">3</span></p></td><td class=\"cl-550aad54\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">Convicted Offender, Arrestee, Combined</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-550aad55\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">variable_category</span></p></td><td class=\"cl-550aad56\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">character</span></p></td><td class=\"cl-550aad5e\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">8</span></p></td><td class=\"cl-550aad5f\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">0</span></p></td><td class=\"cl-550aad68\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">3</span></p></td><td class=\"cl-550aad69\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">total, gender, race</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-550aad6a\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">variable_detailed</span></p></td><td class=\"cl-550aad72\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">character</span></p></td><td class=\"cl-550aad73\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">8</span></p></td><td class=\"cl-550aad74\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">0</span></p></td><td class=\"cl-550aad7c\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">7</span></p></td><td class=\"cl-550aad7d\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">total_profiles, Female, Male, Caucasian, Black, Hispanic, Other</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-550aad7e\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">value</span></p></td><td class=\"cl-550aad7f\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">numeric</span></p></td><td class=\"cl-550aad86\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">8</span></p></td><td class=\"cl-550aad87\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">0</span></p></td><td class=\"cl-550aad88\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">8</span></p></td><td class=\"cl-550aad90\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">279654, 21087, 20, 80, 70, 26, 4, 0.5</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-550aad91\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">value_type</span></p></td><td class=\"cl-550aad92\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">character</span></p></td><td class=\"cl-550aad9a\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">8</span></p></td><td class=\"cl-550aad9b\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">0</span></p></td><td class=\"cl-550aad9c\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">2</span></p></td><td class=\"cl-550aada4\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">count, percentage</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-550aada5\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">value_source</span></p></td><td class=\"cl-550aada6\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">character</span></p></td><td class=\"cl-550aadae\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">8</span></p></td><td class=\"cl-550aadaf\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">0</span></p></td><td class=\"cl-550aadb0\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">1</span></p></td><td class=\"cl-550aadb1\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">reported</span></p></td></tr></tbody><tfoot><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"6\"class=\"cl-550aadb8\"><p class=\"cl-550aa07a\"><span class=\"cl-550967fa\">Data frame dimensions: 8 rows × 7 columns</span></p></td></tr></tfoot></table></div>\n```\n\n:::\n:::\n\n\n### Verify Data Consistency\n\nInitial checks reveal Indiana's unique structure: counts for totals,\npercentages only for Combined demographics.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nInitial data availability:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRace data: percentages \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nGender data: percentages \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nValue types in raw data:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\ncount, percentage\n```\n\n\n:::\n:::\n\n\n### Address Data Gaps\n\n#### Convert String Values to Numeric\n\nThe raw data contains string values including \"\\<1\" which we convert to\n0.5.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show value conversion code\"}\n# Start with raw data\nin_clean <- in_raw\n\n# Convert string values to numeric, handling \"<1\" as 1\nin_clean$value <- sapply(in_clean$value, function(x) {\n  if (x == \"<1\") {\n    0.5\n  } else {\n    as.numeric(x)\n  }\n})\n\n# Update value_type for converted percentages\nin_clean <- in_clean %>%\n  mutate(value_type = ifelse(value_type == \"percentage\", \"percentage\", value_type))\n\ncat(\"✓ Converted Indiana values from String to numeric\\n\")\ncat(paste(\"Unique values after conversion:\", paste(unique(in_clean$value), collapse = \", \"), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Converted Indiana values from String to numeric\nUnique values after conversion: 279654, 21087, 20, 80, 70, 26, 4, 0.5 \n```\n\n\n:::\n:::\n\n\n#### Solve Percentages Inconsistency\n\nRacial percentages summed to 100.5% instead of 100%\n\nProportional scaling was applied and `value_source` was updated to \"calculated\" for all adjusted values.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show percentage recalculation code\"}\n# Adjust percentages to ensure they sum to 100% and mark as calculated\nin_clean <- in_clean %>%\n  group_by(value_type, variable_category) %>%\n  mutate(\n    value = ifelse(\n      value_type == \"percentage\" & variable_category == \"race\",\n      value * (100 / sum(value, na.rm = TRUE)),\n      value\n    ),\n    value_source = ifelse(\n      value_type == \"percentage\" & variable_category == \"race\",\n      \"calculated\",\n      value_source\n    )\n  ) %>%\n  ungroup()\n\n# Verify the new sum\npercentage_sum <- in_clean %>%\n  filter(value_type == \"percentage\" & variable_category == \"race\") %>%\n  summarise(total = sum(value, na.rm = TRUE))\n\ncat(\"✓ Recalculated percentages for Indiana - New sum:\", percentage_sum$total, \"%\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Recalculated percentages for Indiana - New sum: 100 %\n```\n\n\n:::\n:::\n\n\n#### Standardize Terminology\n\nIndiana uses \"Caucasian\" instead of \"White\".\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show terminology standardization code\"}\n# Standardize racial terminology\nin_clean <- in_clean %>%\n  mutate(variable_detailed = case_when(\n    variable_detailed == \"Caucasian\" ~ \"White\",\n    TRUE ~ variable_detailed\n  ))\n\ncat(\"✓ Standardized terminology: 'Caucasian' → 'White'\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Standardized terminology: 'Caucasian' → 'White'\n```\n\n\n:::\n:::\n\n\n#### Create Combined Total Profiles\n\nIndiana provides separate totals for Convicted Offenders and Arrestees,\nbut we need a Combined total to match the demographic percentages.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show combined total calculation code\"}\n# Calculate Combined total from separate offender type totals\nconvicted_total <- in_clean %>%\n  filter(offender_type == \"Convicted Offender\",\n         variable_category == \"total\",\n         variable_detailed == \"total_profiles\") %>%\n  pull(value)\n\narrestee_total <- in_clean %>%\n  filter(offender_type == \"Arrestee\",\n         variable_category == \"total\",\n         variable_detailed == \"total_profiles\") %>%\n  pull(value)\n\ncombined_total <- convicted_total + arrestee_total\n\n# Add Combined total to the data\ncombined_row <- data.frame(\n  state = \"Indiana\",\n  offender_type = \"Combined\",\n  variable_category = \"total\",\n  variable_detailed = \"total_profiles\",\n  value = combined_total,\n  value_type = \"count\",\n  value_source = \"calculated\"\n)\n\nin_clean <- bind_rows(in_clean, combined_row)\n\ncat(paste(\"Combined total profiles:\", format(combined_total, big.mark = \",\"), \"\\n\"))\ncat(\"✓ Added Combined total profiles\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCombined total profiles: 300,741 \n✓ Added Combined total profiles\n```\n\n\n:::\n:::\n\n\n#### Calculate Counts from Percentages\n\nIndiana only provides percentages for demographic categories. We calculate the actual counts using the Combined total.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show count calculation code\"}\n# Calculate counts from percentages for Combined offender type\nin_clean <- bind_rows(in_clean, calculate_counts_from_percentages(in_clean, \"Indiana\"))\n\ncat(\"✓ Calculated demographic counts from percentages\\n\")\n\n# Verify the calculations\ncat(\"Category totals after calculating counts:\\n\")\nverify_category_totals(in_clean) %>% kable() %>% kable_styling()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Calculated demographic counts from percentages\nCategory totals after calculating counts:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> offender_type </th>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> total_profiles </th>\n   <th style=\"text-align:right;\"> sum_counts </th>\n   <th style=\"text-align:right;\"> difference </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 300741 </td>\n   <td style=\"text-align:right;\"> 300741 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 300741 </td>\n   <td style=\"text-align:right;\"> 300741 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n### Verify Data Consistency\n\nFinal checks to ensure all data is now consistent and complete.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nFinal data consistency checks:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCounts consistent: TRUE \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPercentages consistent: TRUE \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nFinal data availability:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRace data: both \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nGender data: both \n```\n\n\n:::\n:::\n\n\n### Prepare for Combined Dataset\n\nThe cleaned data is formatted to match the master schema and appended to\nthe `foia_combined` dataframe.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show Indiana data preparation to combined dataset\"}\n# Prepare the cleaned data for the combined dataset\nin_prepared <- prepare_state_for_combined(in_clean, \"Indiana\")\n\n# Append to the master combined dataframe\nfoia_combined <- bind_rows(foia_combined, in_prepared)\n\ncat(paste0(\"✓ Appended \", nrow(in_prepared), \" Indiana rows to foia_combined\\n\"))\ncat(paste0(\"✓ Total rows in foia_combined: \", nrow(foia_combined), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Appended 15 Indiana rows to foia_combined\n✓ Total rows in foia_combined: 88\n```\n\n\n:::\n:::\n\n\n### Document Metadata\n\nThe metadata is added with details on all processing steps performed.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show Indiana data preparation and addition to metadata table\"}\n# Add Indiana to the metadata table using the helper function\nadd_state_metadata(\"Indiana\", in_raw)\n\n# Update metadata with QC results and processing notes\nupdate_state_metadata(\"Indiana\", \n                      counts_ok = counts_consistent(in_clean),\n                      percentages_ok = percentages_consistent(in_clean),\n                      notes_text = \"Converted string values to numeric; standardized 'Black' to 'African American'; calculated Combined total profiles; derived all demographic counts from reported percentages\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Metadata added for: Indiana \n✓ Metadata updated for: Indiana \n```\n\n\n:::\n:::\n\n\n### Visualizations\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Indiana DNA Database Demographic Distributions](foia_processing_files/figure-html/in-visualizations-1.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Indiana DNA Database Demographic Distributions](foia_processing_files/figure-html/in-visualizations-2.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Indiana DNA Database Demographic Distributions](foia_processing_files/figure-html/in-visualizations-3.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Indiana DNA Database Demographic Distributions](foia_processing_files/figure-html/in-visualizations-4.png){width=768}\n:::\n:::\n\n\n### Summary Statistics\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the summary statistics code\"}\ncat(\"Indiana DNA Database Summary:\\n\")\ncat(\"=\", strrep(\"=\", 40), \"\\n\")\n\n# Total profiles by offender type\ntotals <- foia_combined %>%\n  filter(state == \"Indiana\",\n         variable_category == \"total\",\n         variable_detailed == \"total_profiles\",\n         value_type == \"count\") %>%\n  select(offender_type, value, value_source) %>%\n  mutate(value_formatted = format(value, big.mark = \",\"))\n\nprint(totals)\n\n# Data completeness by value source\ncat(\"\\nData completeness by source:\\n\")\ncompleteness <- foia_combined %>%\n  filter(state == \"Indiana\") %>%\n  group_by(value_source) %>%\n  summarise(n_values = n(), .groups = \"drop\")\n\nprint(completeness)\n\n# Final verification\ncat(\"\\nFinal verification:\\n\")\ncat(paste(\"Counts consistent:\", counts_consistent(foia_combined %>% filter(state == \"Indiana\")), \"\\n\"))\ncat(paste(\"Percentages consistent:\", percentages_consistent(foia_combined %>% filter(state == \"Indiana\")), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nIndiana DNA Database Summary:\n= ======================================== \n# A tibble: 3 × 4\n  offender_type       value value_source value_formatted\n  <chr>               <dbl> <chr>        <chr>          \n1 Convicted Offender 279654 reported     \"279,654\"      \n2 Arrestee            21087 reported     \" 21,087\"      \n3 Combined           300741 calculated   \"300,741\"      \n\nData completeness by source:\n# A tibble: 2 × 2\n  value_source n_values\n  <chr>           <int>\n1 calculated         11\n2 reported            4\n\nFinal verification:\nCounts consistent: TRUE \nPercentages consistent: TRUE \n```\n\n\n:::\n:::\n\n\n### Summary of Indiana Processing\n\nIndiana data processing complete. The unique dataset required:\n\n-   ✅ **Data conversion**: String values converted to numeric, handling\n    \"\\<1\" as 0.5\n\n-   ✅ **Terminology standardization**: \"Caucasian\" converted to \"White\"\n\n-   ✅ **Calculated additions**:\n\n    -   Combined total profiles across offender types\n\n    -   All demographic counts derived from reported percentages\n\n-   ✅ **Quality checks**: All counts and percentages pass consistency\n    validation\n\n-   ✅ **Provenance tracking**: Clear distinction between reported and\n    calculated values\n\nThe Indiana data is now standardized and ready for cross-state analysis.\n\n## Maine (ME)\n\n**Overview**: Maine provides comprehensive reporting with **both counts\nand percentages** for all gender and race categories across all offender\ntypes, including pre-calculated Combined totals. The data is complete\nand requires no processing.\n\n### Examine Raw Data\n\nEstablish a baseline understanding of the data exactly as it was\nreceived.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-554bb3bc{table-layout:auto;width:100%;}.cl-55480e6a{font-family:'Helvetica';font-size:10pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-55480e74{font-family:'Helvetica';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-55494e24{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-55495ae0{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495ae1{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495aea{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495aeb{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495aec{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495af4{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495af5{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495af6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495afe{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495aff{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b08{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b09{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b0a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b0b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b12{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b13{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b1c{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b1d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b1e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b1f{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b26{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b27{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b28{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b29{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b2a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b30{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b31{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b3a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b3b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b3c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b3d{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b44{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b45{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b46{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b47{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b4e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b4f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b50{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b58{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b59{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b5a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b5b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b62{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b63{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b64{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b6c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b6d{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b6e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b76{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b77{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b80{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b81{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b82{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55495b8a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-554bb3bc'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-55495ae0\"><p class=\"cl-55494e24\"><span class=\"cl-55480e6a\">Column</span></p></th><th class=\"cl-55495ae1\"><p class=\"cl-55494e24\"><span class=\"cl-55480e6a\">Type</span></p></th><th class=\"cl-55495aea\"><p class=\"cl-55494e24\"><span class=\"cl-55480e6a\">Rows</span></p></th><th class=\"cl-55495aeb\"><p class=\"cl-55494e24\"><span class=\"cl-55480e6a\">Missing</span></p></th><th class=\"cl-55495aec\"><p class=\"cl-55494e24\"><span class=\"cl-55480e6a\">Unique</span></p></th><th class=\"cl-55495af4\"><p class=\"cl-55494e24\"><span class=\"cl-55480e6a\">Unique_Values</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55495af5\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">state</span></p></td><td class=\"cl-55495af6\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">character</span></p></td><td class=\"cl-55495afe\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">19</span></p></td><td class=\"cl-55495aff\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">0</span></p></td><td class=\"cl-55495b08\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">1</span></p></td><td class=\"cl-55495b09\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">Maine</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55495b0a\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">offender_type</span></p></td><td class=\"cl-55495b0b\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">character</span></p></td><td class=\"cl-55495b12\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">19</span></p></td><td class=\"cl-55495b13\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">0</span></p></td><td class=\"cl-55495b1c\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">1</span></p></td><td class=\"cl-55495b1d\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">Combined</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55495b1e\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">variable_category</span></p></td><td class=\"cl-55495b1f\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">character</span></p></td><td class=\"cl-55495b26\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">19</span></p></td><td class=\"cl-55495b27\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">0</span></p></td><td class=\"cl-55495b28\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">3</span></p></td><td class=\"cl-55495b29\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">total, gender, race</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55495b2a\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">variable_detailed</span></p></td><td class=\"cl-55495b30\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">character</span></p></td><td class=\"cl-55495b31\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">19</span></p></td><td class=\"cl-55495b3a\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">0</span></p></td><td class=\"cl-55495b3b\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">9</span></p></td><td class=\"cl-55495b3c\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">total_profiles, Male, Female, Unknown, White, Black, Native American, Hispanic, Asian</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55495b3d\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">value</span></p></td><td class=\"cl-55495b44\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">numeric</span></p></td><td class=\"cl-55495b45\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">19</span></p></td><td class=\"cl-55495b46\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">0</span></p></td><td class=\"cl-55495b47\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">19</span></p></td><td class=\"cl-55495b4e\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">33711 ..., 27694 ..., 82.7 ..., 5734 ..., 17 ..., 83 ..., 0.2 ..., 31298 ..., 92.8 ..., 1299 ...</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55495b4f\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">value_type</span></p></td><td class=\"cl-55495b50\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">character</span></p></td><td class=\"cl-55495b58\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">19</span></p></td><td class=\"cl-55495b59\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">0</span></p></td><td class=\"cl-55495b5a\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">2</span></p></td><td class=\"cl-55495b5b\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">count, percentage</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55495b62\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">value_source</span></p></td><td class=\"cl-55495b63\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">character</span></p></td><td class=\"cl-55495b64\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">19</span></p></td><td class=\"cl-55495b6c\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">0</span></p></td><td class=\"cl-55495b6d\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">1</span></p></td><td class=\"cl-55495b6e\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">reported</span></p></td></tr></tbody><tfoot><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"6\"class=\"cl-55495b76\"><p class=\"cl-55494e24\"><span class=\"cl-55480e74\">Data frame dimensions: 19 rows × 7 columns</span></p></td></tr></tfoot></table></div>\n```\n\n:::\n:::\n\n\n### Verify Data Consistency\n\nRuns quality checks using the `verify_category_totals()`,\n`counts_consistent()`, and `percentages_consistent()` functions.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nVerifying that demographic counts match reported totals:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> offender_type </th>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> total_profiles </th>\n   <th style=\"text-align:right;\"> sum_counts </th>\n   <th style=\"text-align:right;\"> difference </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 33711 </td>\n   <td style=\"text-align:right;\"> 33511 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 33711 </td>\n   <td style=\"text-align:right;\"> 33711 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCounts consistency check on raw data:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll counts consistent: FALSE \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nPercentage consistency check on raw data:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll percentages sum to ~100%: TRUE \n```\n\n\n:::\n:::\n\n\n### Address Data Gaps\n\n#### Solve Percentages Inconsistency\n\nRacial percentages summed to 99.9% instead of 100%\n\nProportional scaling was applied and `value_source` was updated to \"calculated\" for all adjusted values.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show percentage recalculation code\"}\n# Start with the raw data\nme_clean <- me_raw\n\n# Adjust percentages to ensure they sum to 100% and mark as calculated\nme_clean <- me_clean %>%\n  group_by(value_type, variable_category) %>%\n  mutate(\n    value = ifelse(\n      value_type == \"percentage\" & variable_category == \"gender\",\n      value * (100 / sum(value, na.rm = TRUE)),\n      value\n    ),\n    value_source = ifelse(\n      value_type == \"percentage\" & variable_category == \"gender\",\n      \"calculated\",\n      value_source\n    )\n  ) %>%\n  ungroup()\n\n# Verify the new sum\npercentage_sum <- me_clean %>%\n  filter(value_type == \"percentage\" & variable_category == \"gender\") %>%\n  summarise(total = sum(value, na.rm = TRUE))\n\ncat(\"✓ Recalculated percentages for Maine - New sum:\", round(percentage_sum$total, 2), \"%\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Recalculated percentages for Maine - New sum: 100 %\n```\n\n\n:::\n:::\n\n\n#### Recalculate Counts from Percentages\n\nMaine's reported gender counts sum were inconsistent with the `total_profiles`.\n\nWe removed existing gender count data and recalculated counts using percentage values and combined totals.\n\nAll recalculated values flagged with `value_source = \"calculated\"`\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show count recalculation code\"}\n# Remove existing gender count rows to avoid duplication\nme_clean <- me_clean %>%\n  filter(!(variable_category == \"gender\" & value_type == \"count\"))\n\ncat(\"✓ Removed existing gender count data\\n\")\n\nme_gender <- me_clean %>%\n    filter(variable_category == \"gender\" | variable_category == \"total\")\n\n# Calculate counts from percentages for Combined offender type\nme_gender <- calculate_counts_from_percentages(me_gender, \"Maine\")\n\n# Append recalculated gender counts to the main dataset\nme_clean <- bind_rows(me_clean, me_gender)\n\ncat(\"✓ Calculated demographic counts from percentages\\n\")\n\n# Verify the calculations\ncat(\"Category totals after calculating counts:\\n\")\nverify_category_totals(me_clean) %>% kable() %>% kable_styling()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Removed existing gender count data\n✓ Calculated demographic counts from percentages\nCategory totals after calculating counts:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> offender_type </th>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> total_profiles </th>\n   <th style=\"text-align:right;\"> sum_counts </th>\n   <th style=\"text-align:right;\"> difference </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 33711 </td>\n   <td style=\"text-align:right;\"> 33711 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 33711 </td>\n   <td style=\"text-align:right;\"> 33711 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n### Verify Data Consistency\n\nFinal checks to ensure all data is now consistent and complete.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nFinal data consistency checks:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCounts consistent: TRUE \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPercentages consistent: TRUE \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nFinal data availability:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRace data: both \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nGender data: both \n```\n\n\n:::\n:::\n\n\n### Prepare for Combined Dataset\n\nThe Maine data is already complete and consistent. It is formatted to\nmatch the master schema and appended to the `foia_combined` dataframe.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show Maine data preparation to combined dataset\"}\n# Prepare the data for the combined dataset\nme_prepared <- prepare_state_for_combined(me_clean, \"Maine\")\n\n# Append to the master combined dataframe\nfoia_combined <- bind_rows(foia_combined, me_prepared)\n\ncat(paste0(\"✓ Appended \", nrow(me_prepared), \" Maine rows to foia_combined\\n\"))\ncat(paste0(\"✓ Total rows in foia_combined: \", nrow(foia_combined), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Appended 19 Maine rows to foia_combined\n✓ Total rows in foia_combined: 107\n```\n\n\n:::\n:::\n\n\n### Document Metadata\n\nThe metadata is added with a note that the data was complete and\nrequired no processing.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show Maine data preparation and addition to metadata table\"}\n# Add Maine to the metadata table using the helper function\nadd_state_metadata(\"Maine\", me_raw)\n\n# Update metadata with QC results\nupdate_state_metadata(\"Maine\", \n                      counts_ok = counts_consistent(me_clean),\n                      percentages_ok = percentages_consistent(me_clean),\n                      notes_text = \"Complete dataset provided with both counts and percentages. No processing or calculations required. All values are reported.\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Metadata added for: Maine \n✓ Metadata updated for: Maine \n```\n\n\n:::\n:::\n\n\n### Visualizations\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Maine DNA Database Demographic Distributions](foia_processing_files/figure-html/me-visualizations-1.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Maine DNA Database Demographic Distributions](foia_processing_files/figure-html/me-visualizations-2.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Maine DNA Database Demographic Distributions](foia_processing_files/figure-html/me-visualizations-3.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Maine DNA Database Demographic Distributions](foia_processing_files/figure-html/me-visualizations-4.png){width=768}\n:::\n:::\n\n\n### Summary Statistics\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the summary statistics code\"}\ncat(\"Maine DNA Database Summary:\\n\")\ncat(\"=\", strrep(\"=\", 40), \"\\n\")\n\n# Total profiles by offender type\ntotals <- foia_combined %>%\n  filter(state == \"Maine\",\n         variable_category == \"total\",\n         variable_detailed == \"total_profiles\",\n         value_type == \"count\") %>%\n  select(offender_type, value) %>%\n  mutate(value_formatted = format(value, big.mark = \",\"))\n\nprint(totals)\n\n# Data completeness\ncat(\"\\nData completeness:\\n\")\ncompleteness <- foia_combined %>%\n  filter(state == \"Maine\") %>%\n  group_by(offender_type, value_source) %>%\n  summarise(n_values = n(), .groups = \"drop\")\n\nprint(completeness)\n\n# Final verification\ncat(\"\\nFinal verification:\\n\")\ncat(paste(\"Counts consistent:\", counts_consistent(foia_combined %>% filter(state == \"Maine\")), \"\\n\"))\ncat(paste(\"Percentages consistent:\", percentages_consistent(foia_combined %>% filter(state == \"Maine\")), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMaine DNA Database Summary:\n= ======================================== \n# A tibble: 1 × 3\n  offender_type value value_formatted\n  <chr>         <dbl> <chr>          \n1 Combined      33711 33,711         \n\nData completeness:\n# A tibble: 2 × 3\n  offender_type value_source n_values\n  <chr>         <chr>           <int>\n1 Combined      calculated          6\n2 Combined      reported           13\n\nFinal verification:\nCounts consistent: TRUE \nPercentages consistent: TRUE \n```\n\n\n:::\n:::\n\n\n### Summary of Maine Processing\n\nMaine data processing complete. The dataset is exemplary and required no\nadjustments:\n\n-   ✅ **Reported data**: Both **counts and percentages** for all\n    Convicted Offender, Arrestee, and Combined categories\n\n-   ✅ **No calculated additions needed**: All values are sourced\n    directly from the state report (**`value_source = \"reported\"`**)\n\n-   ✅ **Quality checks**: All counts and percentages pass consistency\n    validation\n\n-   ✅ **Provenance tracking**: All values maintain their original\n    **`value_source`** as \"reported\"\n\nThe Maine data is now standardized and ready for cross-state analysis.\n\n## Nevada (NV)\n\n**Overview**: Nevada provides **both counts and percentages** for gender\nand race categories but uses non-standard terminology that requires\nconversion for consistency with our schema.\n\n### Examine Raw Data\n\nEstablish a baseline understanding of the data exactly as it was\nreceived.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-55886924{table-layout:auto;width:100%;}.cl-5584d4e4{font-family:'Helvetica';font-size:10pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5584d4ee{font-family:'Helvetica';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-558696a8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5586a29c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2a6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2a7{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2a8{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2a9{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2b0{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2b1{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2b2{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2b3{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2b4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2ba{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2bb{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2bc{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2bd{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2c4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2c5{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2c6{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2c7{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2ce{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2cf{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2d0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2d1{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2d2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2d8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2d9{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2da{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2e2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2e3{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2e4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2e5{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2ec{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2ed{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2ee{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2ef{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2f0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2f6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2f7{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2f8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a2f9{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a300{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a301{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a302{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a303{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a30a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a30b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a30c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a30d{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a314{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a315{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a316{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a31e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a31f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a320{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5586a321{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-55886924'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-5586a29c\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4e4\">Column</span></p></th><th class=\"cl-5586a2a6\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4e4\">Type</span></p></th><th class=\"cl-5586a2a7\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4e4\">Rows</span></p></th><th class=\"cl-5586a2a8\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4e4\">Missing</span></p></th><th class=\"cl-5586a2a9\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4e4\">Unique</span></p></th><th class=\"cl-5586a2b0\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4e4\">Unique_Values</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-5586a2b1\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">state</span></p></td><td class=\"cl-5586a2b2\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">character</span></p></td><td class=\"cl-5586a2b3\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">21</span></p></td><td class=\"cl-5586a2b4\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">0</span></p></td><td class=\"cl-5586a2ba\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">1</span></p></td><td class=\"cl-5586a2bb\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">Nevada</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-5586a2bc\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">offender_type</span></p></td><td class=\"cl-5586a2bd\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">character</span></p></td><td class=\"cl-5586a2c4\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">21</span></p></td><td class=\"cl-5586a2c5\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">0</span></p></td><td class=\"cl-5586a2c6\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">4</span></p></td><td class=\"cl-5586a2c7\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">All, Arrestee, Convicted Offender, Combined</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-5586a2ce\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">variable_category</span></p></td><td class=\"cl-5586a2cf\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">character</span></p></td><td class=\"cl-5586a2d0\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">21</span></p></td><td class=\"cl-5586a2d1\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">0</span></p></td><td class=\"cl-5586a2d2\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">3</span></p></td><td class=\"cl-5586a2d8\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">total, gender, race</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-5586a2d9\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">variable_detailed</span></p></td><td class=\"cl-5586a2da\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">character</span></p></td><td class=\"cl-5586a2e2\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">21</span></p></td><td class=\"cl-5586a2e3\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">0</span></p></td><td class=\"cl-5586a2e4\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">9</span></p></td><td class=\"cl-5586a2e5\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">total_flags, total_profiles, Female, Male, Unknown, White, American Indian, Black, Asian</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-5586a2ec\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">value</span></p></td><td class=\"cl-5586a2ed\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">numeric</span></p></td><td class=\"cl-5586a2ee\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">21</span></p></td><td class=\"cl-5586a2ef\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">0</span></p></td><td class=\"cl-5586a2f0\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">21</span></p></td><td class=\"cl-5586a2f6\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">344097 ..., 185074 ..., 53.785 ..., 159023 ..., 46.215 ..., 63287 ..., 18.392 ..., 280738 ..., 81.587 ..., 72 ...</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-5586a2f7\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">value_type</span></p></td><td class=\"cl-5586a2f8\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">character</span></p></td><td class=\"cl-5586a2f9\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">21</span></p></td><td class=\"cl-5586a300\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">0</span></p></td><td class=\"cl-5586a301\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">2</span></p></td><td class=\"cl-5586a302\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">count, percentage</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-5586a303\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">value_source</span></p></td><td class=\"cl-5586a30a\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">character</span></p></td><td class=\"cl-5586a30b\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">21</span></p></td><td class=\"cl-5586a30c\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">0</span></p></td><td class=\"cl-5586a30d\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">1</span></p></td><td class=\"cl-5586a314\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">reported</span></p></td></tr></tbody><tfoot><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"6\"class=\"cl-5586a315\"><p class=\"cl-558696a8\"><span class=\"cl-5584d4ee\">Data frame dimensions: 21 rows × 7 columns</span></p></td></tr></tfoot></table></div>\n```\n\n:::\n:::\n\n\n### Verify Data Consistency\n\nInitial check reveals Nevada's non-standard terminology.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nInitial data availability:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRace data: both \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nGender data: both \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nNon-standard terminology found:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOffender types: All, Arrestee, Convicted Offender, Combined \n```\n\n\n:::\n:::\n\n\n### Address Data Gaps\n\n#### Standardize Terminology\n\nNevada uses \"All\" instead of \"Combined\", \"total_flags\" instead of \"total_profiles\" and \"American Indian\" instead of\n\"Native American\".\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show terminology standardization code\"}\n# Start with raw data\nnv_clean <- nv_raw\n\n# Standardize offender types and racial terminology\nnv_clean <- nv_clean %>%\n  mutate(\n    offender_type = case_when(\n      offender_type == \"All\" ~ \"Combined\",\n      TRUE ~ offender_type\n    ),\n    variable_detailed = case_when(\n      variable_detailed == \"total_flags\" ~ \"total_profiles\",\n      TRUE ~ variable_detailed\n    ),\n    variable_detailed = case_when(\n      variable_detailed == \"American Indian\" ~ \"Native American\",\n      TRUE ~ variable_detailed\n    )\n  )\n\ncat(\"✓ Standardized terminology:\\n\")\ncat(\"  - 'All' → 'Combined'\\n\")\ncat(\"  - 'total_flags' → 'total_profiles'\\n\")\ncat(\"  - 'American Indian' → 'Native American'\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Standardized terminology:\n  - 'All' → 'Combined'\n  - 'total_flags' → 'total_profiles'\n  - 'American Indian' → 'Native American'\n```\n\n\n:::\n:::\n\n\n#### Verify Consistency\n\nNow that the offender types are standardized, we can verify the counts and percentages.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nVerifying that demographic counts match reported totals:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> offender_type </th>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> total_profiles </th>\n   <th style=\"text-align:right;\"> sum_counts </th>\n   <th style=\"text-align:right;\"> difference </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 344097 </td>\n   <td style=\"text-align:right;\"> 344097 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 344097 </td>\n   <td style=\"text-align:right;\"> 344097 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCounts consistency check on raw data:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll counts consistent: TRUE \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nPercentage consistency check on raw data:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll percentages sum to ~100%: TRUE \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSum of 'race' percentages: 100 %\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSum of 'gender' percentages: 100 %\n```\n\n\n:::\n:::\n\n\n### Prepare for Combined Dataset\n\nThe cleaned data is formatted to match the master schema and appended to\nthe `foia_combined` dataframe.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show Nevada data preparation to combined dataset\"}\n# Prepare the cleaned data for the combined dataset\nnv_prepared <- prepare_state_for_combined(nv_clean, \"Nevada\")\n\n# Append to the master combined dataframe\nfoia_combined <- bind_rows(foia_combined, nv_prepared)\n\ncat(paste0(\"✓ Appended \", nrow(nv_prepared), \" Nevada rows to foia_combined\\n\"))\ncat(paste0(\"✓ Total rows in foia_combined: \", nrow(foia_combined), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Appended 21 Nevada rows to foia_combined\n✓ Total rows in foia_combined: 128\n```\n\n\n:::\n:::\n\n\n### Document Metadata\n\nThe metadata is added with details on the terminology standardization\nperformed.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show Nevada data preparation and addition to metadata table\"}\n# Add Nevada to the metadata table using the helper function\nadd_state_metadata(\"Nevada\", nv_raw)\n\n# Update metadata with QC results and processing notes\nupdate_state_metadata(\"Nevada\", \n                      counts_ok = counts_consistent(nv_clean),\n                      percentages_ok = percentages_consistent(nv_clean),\n                      notes_text = \"Standardized terminology: 'All' to 'Combined' and 'American Indian' to 'Native American'. All values remain reported.\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Metadata added for: Nevada \n✓ Metadata updated for: Nevada \n```\n\n\n:::\n:::\n\n\n### Visualizations\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Nevada DNA Database Demographic Distributions](foia_processing_files/figure-html/nv-visualizations-1.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Nevada DNA Database Demographic Distributions](foia_processing_files/figure-html/nv-visualizations-2.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Nevada DNA Database Demographic Distributions](foia_processing_files/figure-html/nv-visualizations-3.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Nevada DNA Database Demographic Distributions](foia_processing_files/figure-html/nv-visualizations-4.png){width=768}\n:::\n:::\n\n\n### Summary Statistics\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the summary statistics code\"}\ncat(\"Nevada DNA Database Summary:\\n\")\ncat(\"=\", strrep(\"=\", 40), \"\\n\")\n\n# Total profiles by offender type\ntotals <- foia_combined %>%\n  filter(state == \"Nevada\",\n         variable_category == \"total\",\n         variable_detailed == \"total_profiles\",\n         value_type == \"count\") %>%\n  select(offender_type, value) %>%\n  mutate(value_formatted = format(value, big.mark = \",\"))\n\nprint(totals)\n\n# Data completeness\ncat(\"\\nData completeness:\\n\")\ncompleteness <- foia_combined %>%\n  filter(state == \"Nevada\") %>%\n  group_by(offender_type, value_source) %>%\n  summarise(n_values = n(), .groups = \"drop\")\n\nprint(completeness)\n\n# Final verification\ncat(\"\\nFinal verification:\\n\")\ncat(paste(\"Counts consistent:\", counts_consistent(foia_combined %>% filter(state == \"Nevada\")), \"\\n\"))\ncat(paste(\"Percentages consistent:\", percentages_consistent(foia_combined %>% filter(state == \"Nevada\")), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNevada DNA Database Summary:\n= ======================================== \n# A tibble: 3 × 3\n  offender_type       value value_formatted\n  <chr>               <dbl> <chr>          \n1 Combined           344097 344,097        \n2 Arrestee           185074 185,074        \n3 Convicted Offender 159023 159,023        \n\nData completeness:\n# A tibble: 3 × 3\n  offender_type      value_source n_values\n  <chr>              <chr>           <int>\n1 Arrestee           reported            2\n2 Combined           reported           17\n3 Convicted Offender reported            2\n\nFinal verification:\nCounts consistent: TRUE \nPercentages consistent: FALSE \n```\n\n\n:::\n:::\n\n\n### Summary of Nevada Processing\n\nNevada data processing complete. The dataset required minimal\nadjustments:\n\n-   ✅ **Terminology standardization**:\n\n    -   \"All\" → \"Combined\" (offender type)\n\n    -   \"American Indian\" → \"Native American\" (race category)\n\n-   ✅ **Reported data**: Both counts and percentages for all categories\n\n-   ✅ **Quality checks**: All counts and percentages pass consistency\n    validation\n\n-   ✅ **Provenance tracking**: All values maintain\n    **`value_source = \"reported\"`** as only terminology changes were\n    made\n\nThe Nevada data is now standardized and ready for cross-state analysis.\n\n## South Dakota (SD)\n\n**Overview**: South Dakota provides the most comprehensive reporting\nwith **both counts and percentages** for all standard categories plus\nunique intersectional gender×race data. Minor terminology\nstandardization is required for consistency.\n\n### Examine Raw Data\n\nEstablish a baseline understanding of the data exactly as it was\nreceived.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-55c15dba{table-layout:auto;width:100%;}.cl-55bdcbb4{font-family:'Helvetica';font-size:10pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-55bdcbb5{font-family:'Helvetica';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-55bf930e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-55bf9ebc{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9ebd{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9ec6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9ec7{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9ec8{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9ec9{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9ed0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9ed1{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9ed2{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f16{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f17{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f20{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f21{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f22{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f23{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f2a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f2b{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f2c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f2d{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f34{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f35{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f36{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f37{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f3e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f3f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f40{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f41{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f42{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f48{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f49{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f4a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f4b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f52{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f53{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f54{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f55{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f56{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f57{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f5c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f5d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f5e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f5f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f66{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f67{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f68{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f70{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f71{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f72{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f73{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f7a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f7b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f7c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f84{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-55bf9f85{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-55c15dba'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-55bf9ebc\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb4\">Column</span></p></th><th class=\"cl-55bf9ebd\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb4\">Type</span></p></th><th class=\"cl-55bf9ec6\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb4\">Rows</span></p></th><th class=\"cl-55bf9ec7\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb4\">Missing</span></p></th><th class=\"cl-55bf9ec8\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb4\">Unique</span></p></th><th class=\"cl-55bf9ec9\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb4\">Unique_Values</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55bf9ed0\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">state</span></p></td><td class=\"cl-55bf9ed1\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">character</span></p></td><td class=\"cl-55bf9ed2\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">41</span></p></td><td class=\"cl-55bf9f16\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">0</span></p></td><td class=\"cl-55bf9f17\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">1</span></p></td><td class=\"cl-55bf9f20\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">South Dakota</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55bf9f21\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">offender_type</span></p></td><td class=\"cl-55bf9f22\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">character</span></p></td><td class=\"cl-55bf9f23\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">41</span></p></td><td class=\"cl-55bf9f2a\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">0</span></p></td><td class=\"cl-55bf9f2b\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">1</span></p></td><td class=\"cl-55bf9f2c\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">Combined</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55bf9f2d\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">variable_category</span></p></td><td class=\"cl-55bf9f34\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">character</span></p></td><td class=\"cl-55bf9f35\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">41</span></p></td><td class=\"cl-55bf9f36\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">0</span></p></td><td class=\"cl-55bf9f37\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">4</span></p></td><td class=\"cl-55bf9f3e\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">total, gender, race, gender_race</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55bf9f3f\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">variable_detailed</span></p></td><td class=\"cl-55bf9f40\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">character</span></p></td><td class=\"cl-55bf9f41\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">41</span></p></td><td class=\"cl-55bf9f42\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">0</span></p></td><td class=\"cl-55bf9f48\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">21</span></p></td><td class=\"cl-55bf9f49\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">total_profiles ..., Male ..., Female ..., Asian ..., Black ..., Hispanic ..., Native American ..., Other/Unknown ..., White/Caucasian ..., Male_Asian ...</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55bf9f4a\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">value</span></p></td><td class=\"cl-55bf9f4b\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">numeric</span></p></td><td class=\"cl-55bf9f52\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">41</span></p></td><td class=\"cl-55bf9f53\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">0</span></p></td><td class=\"cl-55bf9f54\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">38</span></p></td><td class=\"cl-55bf9f55\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">67753 ..., 51197 ..., 75.56 ..., 16556 ..., 24.44 ..., 5 ..., 0.08 ..., 4041 ..., 5.96 ..., 2949 ...</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55bf9f56\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">value_type</span></p></td><td class=\"cl-55bf9f57\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">character</span></p></td><td class=\"cl-55bf9f5c\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">41</span></p></td><td class=\"cl-55bf9f5d\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">0</span></p></td><td class=\"cl-55bf9f5e\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">2</span></p></td><td class=\"cl-55bf9f5f\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">count, percentage</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-55bf9f66\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">value_source</span></p></td><td class=\"cl-55bf9f67\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">character</span></p></td><td class=\"cl-55bf9f68\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">41</span></p></td><td class=\"cl-55bf9f70\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">0</span></p></td><td class=\"cl-55bf9f71\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">1</span></p></td><td class=\"cl-55bf9f72\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">reported</span></p></td></tr></tbody><tfoot><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"6\"class=\"cl-55bf9f73\"><p class=\"cl-55bf930e\"><span class=\"cl-55bdcbb5\">Data frame dimensions: 41 rows × 7 columns</span></p></td></tr></tfoot></table></div>\n```\n\n:::\n:::\n\n\n### Gender-race intersection analysis\n\nSince South Dakota is the only state that reported gender-race intersection data, we can analyze it in detail.\n\n\n::: {.cell layout-ncol=\"1\" fig-fontsize='16'}\n::: {.cell-output-display}\n![South Dakota Intersectional Gender × Race Analysis](foia_processing_files/figure-html/sd-intersectional-visuals-1.png){width=1728}\n:::\n:::\n\n\n### Verify Data Consistency\n\nInitial check reveals South Dakota's comprehensive data structure with\nsome non-standard terminology.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nInitial data availability:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRace data: both \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nGender data: both \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nNon-standard terminology found:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRace terms: Asian, Black, Hispanic, Native American, Other/Unknown, White/Caucasian \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nVerifying that demographic counts match reported totals:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> offender_type </th>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> total_profiles </th>\n   <th style=\"text-align:right;\"> sum_counts </th>\n   <th style=\"text-align:right;\"> difference </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 67753 </td>\n   <td style=\"text-align:right;\"> 67753 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 67753 </td>\n   <td style=\"text-align:right;\"> 67702 </td>\n   <td style=\"text-align:right;\"> 51 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCounts consistency check on raw data:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll counts consistent: FALSE \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nPercentage consistency check on raw data:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll percentages sum to ~100%: TRUE \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSum of 'race' percentages: 100 %\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSum of 'gender' percentages: 100 %\n```\n\n\n:::\n:::\n\n\n### Address Data Gaps\n\n#### Standardize Terminology\n\nSouth Dakota uses \"White/Caucasian\" and \"Other/Unknown\" which need\nstandardization.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show terminology standardization code\"}\n# Standardize racial terminology\nsd_clean <- sd_clean %>%\n  mutate(\n    variable_detailed = case_when(\n      variable_detailed == \"White/Caucasian\" ~ \"White\",\n      variable_detailed == \"Other/Unknown\" ~ \"Unknown\",\n      TRUE ~ variable_detailed\n    )\n  )\n\ncat(\"✓ Standardized terminology:\\n\")\ncat(\"  - 'White/Caucasian' → 'White'\\n\")\ncat(\"  - 'Other/Unknown' → 'Unknown'\\n\")\n\n# Verify the changes\ncat(\"\\nRace categories after standardization:\\n\")\nsd_clean %>%\n  filter(variable_category == \"race\") %>%\n  distinct(variable_detailed) %>%\n  pull() %>%\n  paste(collapse = \", \") %>%\n  cat()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Standardized terminology:\n  - 'White/Caucasian' → 'White'\n  - 'Other/Unknown' → 'Unknown'\n\nRace categories after standardization:\nAsian, Black, Hispanic, Native American, Unknown, White\n```\n\n\n:::\n:::\n\n\n#### Recalculate Counts from Percentages\n\nSouth Dakota's reported race counts sum were inconsistent with the `total_profiles`.\n\nWe removed existing gender count data and recalculated counts using percentage values and combined totals.\n\nAll recalculated values flagged with `value_source = \"calculated\"`\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show count recalculation code\"}\n# Remove existing gender count rows to avoid duplication\nsd_clean <- sd_clean %>%\n  filter(!(variable_category == \"race\" & value_type == \"count\"))\n\ncat(\"✓ Removed existing race count data\\n\")\n\nsd_race <- sd_clean %>%\n    filter(variable_category == \"race\" | variable_category == \"total\")\n\n# Calculate counts from percentages for Combined offender type\nsd_race <- calculate_counts_from_percentages(sd_race, \"South Dakota\")\n\n# Append recalculated race counts to the main dataset\nsd_clean <- bind_rows(sd_clean, sd_race)\n\ncat(\"✓ Calculated demographic counts from percentages\\n\")\n\n# Verify the calculations\ncat(\"Category totals after calculating counts:\\n\")\nverify_category_totals(sd_clean) %>% kable() %>% kable_styling()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Removed existing race count data\n✓ Calculated demographic counts from percentages\nCategory totals after calculating counts:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> offender_type </th>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> total_profiles </th>\n   <th style=\"text-align:right;\"> sum_counts </th>\n   <th style=\"text-align:right;\"> difference </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 67753 </td>\n   <td style=\"text-align:right;\"> 67753 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 67753 </td>\n   <td style=\"text-align:right;\"> 67752 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nWe handled this diffence of 1 by adding it to the most representative race (White).\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show difference handle code\"}\n# Handle the difference of 1 by adding it to the most representative race\nsd_clean <- sd_clean %>%\n  mutate(value = ifelse(variable_detailed == \"White\" & value_type == \"count\", value + 1, value))\n```\n:::\n\n\n### Verify Data Consistency\n\nFinal checks to ensure standardization didn't affect data integrity.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nFinal data consistency checks after standardization:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nVerifying that demographic counts match reported totals:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> offender_type </th>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> total_profiles </th>\n   <th style=\"text-align:right;\"> sum_counts </th>\n   <th style=\"text-align:right;\"> difference </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 67753 </td>\n   <td style=\"text-align:right;\"> 67753 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 67753 </td>\n   <td style=\"text-align:right;\"> 67753 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCounts consistency check:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll counts consistent: TRUE \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nPercentage consistency check:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll percentages sum to ~100%: TRUE \n```\n\n\n:::\n:::\n\n\n### Prepare for Combined Dataset\n\nThe cleaned data is formatted to match the master schema and appended to\nthe `foia_combined` dataframe.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show South Dakota data preparation to combined dataset\"}\n# Prepare the cleaned data for the combined dataset\nsd_prepared <- prepare_state_for_combined(sd_clean, \"South Dakota\")\n\n# Append to the master combined dataframe\nfoia_combined <- bind_rows(foia_combined, sd_prepared)\n\ncat(paste0(\"✓ Appended \", nrow(sd_prepared), \" South Dakota rows to foia_combined\\n\"))\ncat(paste0(\"✓ Total rows in foia_combined: \", nrow(foia_combined), \"\\n\"))\n\n# Show the comprehensive nature of South Dakota's data\ncat(\"\\nSouth Dakota's comprehensive data structure:\\n\")\nsd_prepared %>%\n  group_by(variable_category) %>%\n  summarise(n_rows = n(), .groups = \"drop\") %>%\n  kable() %>% kable_styling()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Appended 17 South Dakota rows to foia_combined\n✓ Total rows in foia_combined: 145\n\nSouth Dakota's comprehensive data structure:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> n_rows </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 12 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> total </td>\n   <td style=\"text-align:right;\"> 1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n### Document Metadata\n\nThe metadata is added with details on South Dakota's comprehensive\nreporting and the terminology standardization performed.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show South Dakota data preparation and addition to metadata table\"}\n# Add South Dakota to the metadata table using the helper function\nadd_state_metadata(\"South Dakota\", sd_raw)\n\n# Update metadata with QC results and processing notes\nupdate_state_metadata(\"South Dakota\", \n                      counts_ok = counts_consistent(sd_clean),\n                      percentages_ok = percentages_consistent(sd_clean),\n                      notes_text = \"Standardized terminology: 'White/Caucasian' to 'White' and 'Other/Unknown' to 'Unknown'. Includes comprehensive gender_race intersectional data. All values remain reported.\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Metadata added for: South Dakota \n✓ Metadata updated for: South Dakota \n```\n\n\n:::\n:::\n\n\n### Visualizations\n\n\n::: {.cell}\n::: {.cell-output-display}\n![South Dakota DNA Database Demographic Distributions](foia_processing_files/figure-html/sd-visualizations-1.png){width=768}\n:::\n\n::: {.cell-output-display}\n![South Dakota DNA Database Demographic Distributions](foia_processing_files/figure-html/sd-visualizations-2.png){width=768}\n:::\n\n::: {.cell-output-display}\n![South Dakota DNA Database Demographic Distributions](foia_processing_files/figure-html/sd-visualizations-3.png){width=768}\n:::\n\n::: {.cell-output-display}\n![South Dakota DNA Database Demographic Distributions](foia_processing_files/figure-html/sd-visualizations-4.png){width=768}\n:::\n:::\n\n\n### Summary Statistics\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the summary statistics code\"}\ncat(\"South Dakota DNA Database Summary:\\n\")\ncat(\"=\", strrep(\"=\", 40), \"\\n\")\n\n# Total profiles by offender type\ntotals <- foia_combined %>%\n  filter(state == \"South Dakota\",\n         variable_category == \"total\",\n         variable_detailed == \"total_profiles\",\n         value_type == \"count\") %>%\n  select(offender_type, value) %>%\n  mutate(value_formatted = format(value, big.mark = \",\"))\n\nprint(totals)\n\n# Data completeness by category\ncat(\"\\nData completeness by category:\\n\")\ncompleteness <- foia_combined %>%\n  filter(state == \"South Dakota\") %>%\n  group_by(variable_category) %>%\n  summarise(n_values = n(), .groups = \"drop\")\n\nprint(completeness)\n\n# Final verification\ncat(\"\\nFinal verification:\\n\")\ncat(paste(\"Counts consistent:\", counts_consistent(foia_combined %>% filter(state == \"South Dakota\")), \"\\n\"))\ncat(paste(\"Percentages consistent:\", percentages_consistent(foia_combined %>% filter(state == \"South Dakota\")), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSouth Dakota DNA Database Summary:\n= ======================================== \n# A tibble: 1 × 3\n  offender_type value value_formatted\n  <chr>         <dbl> <chr>          \n1 Combined      67753 67,753         \n\nData completeness by category:\n# A tibble: 3 × 2\n  variable_category n_values\n  <chr>                <int>\n1 gender                   4\n2 race                    12\n3 total                    1\n\nFinal verification:\nCounts consistent: TRUE \nPercentages consistent: TRUE \n```\n\n\n:::\n:::\n\n\n### Summary of South Dakota Processing\n\nSouth Dakota data processing complete. The state provided exemplary data\nwith minimal adjustments needed:\n\n-   ✅ **Terminology standardization**:\n\n    -   \"White/Caucasian\" → \"White\"\n\n    -   \"Other/Unknown\" → \"Unknown\"\n\n-   ✅ **Comprehensive reporting**: Standard demographics plus unique\n    gender×race intersectional data\n\n-   ✅ **Reported data**: Both counts and percentages for all categories\n\n-   ✅ **Quality checks**: All counts and percentages pass consistency\n    validation\n\n-   ✅ **Provenance tracking**: All values maintain\n    **`value_source = \"reported\"`** as only terminology changes were\n    made\n\nSouth Dakota's data is now\nstandardized and ready for cross-state analysis.\n\n## Texas (TX)\n\n**Overview**: Texas provides **counts only** for gender and race\ncategories. The Male gender is missing in the dataset. The state uses non-standard terminology that requires\nconversion and needs Combined totals and percentages calculated. \n\n### Examine Raw Data\n\nEstablish a baseline understanding of the data exactly as it was\nreceived.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-562f2660{table-layout:auto;width:100%;}.cl-562c2fd2{font-family:'Helvetica';font-size:10pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-562c2fdc{font-family:'Helvetica';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-562d67a8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-562d736a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d736b{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7374{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7375{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7376{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d737e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d737f{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7380{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7388{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7389{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d738a{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7392{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7393{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7394{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7395{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d739c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d739d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d739e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73a6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73a7{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73a8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73a9{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73b0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73b1{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73ba{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73bb{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73bc{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73c4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73c5{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73c6{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73c7{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73ce{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73cf{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73d0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73d1{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73d8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73d9{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73da{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73e2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73e3{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73e4{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73e5{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73ec{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73ed{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73ee{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73f6{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73f7{background-color:rgba(255, 243, 205, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73f8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d73f9{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7400{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7401{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d7402{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d740a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-562d740b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-562f2660'><thead><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-562d736a\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fd2\">Column</span></p></th><th class=\"cl-562d736b\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fd2\">Type</span></p></th><th class=\"cl-562d7374\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fd2\">Rows</span></p></th><th class=\"cl-562d7375\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fd2\">Missing</span></p></th><th class=\"cl-562d7376\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fd2\">Unique</span></p></th><th class=\"cl-562d737e\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fd2\">Unique_Values</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-562d737f\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">state</span></p></td><td class=\"cl-562d7380\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">character</span></p></td><td class=\"cl-562d7388\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">16</span></p></td><td class=\"cl-562d7389\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">0</span></p></td><td class=\"cl-562d738a\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">1</span></p></td><td class=\"cl-562d7392\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">Texas</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-562d7393\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">offender_type</span></p></td><td class=\"cl-562d7394\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">character</span></p></td><td class=\"cl-562d7395\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">16</span></p></td><td class=\"cl-562d739c\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">0</span></p></td><td class=\"cl-562d739d\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">2</span></p></td><td class=\"cl-562d739e\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">Offenders, Arrestee</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-562d73a6\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">variable_category</span></p></td><td class=\"cl-562d73a7\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">character</span></p></td><td class=\"cl-562d73a8\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">16</span></p></td><td class=\"cl-562d73a9\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">0</span></p></td><td class=\"cl-562d73b0\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">3</span></p></td><td class=\"cl-562d73b1\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">total, gender, race</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-562d73ba\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">variable_detailed</span></p></td><td class=\"cl-562d73bb\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">character</span></p></td><td class=\"cl-562d73bc\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">16</span></p></td><td class=\"cl-562d73c4\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">0</span></p></td><td class=\"cl-562d73c5\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">8</span></p></td><td class=\"cl-562d73c6\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">total_profiles, Female, Asian, African American, Caucasian, Hispanic, Native American, Other</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-562d73c7\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">value</span></p></td><td class=\"cl-562d73ce\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">numeric</span></p></td><td class=\"cl-562d73cf\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">16</span></p></td><td class=\"cl-562d73d0\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">0</span></p></td><td class=\"cl-562d73d1\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">16</span></p></td><td class=\"cl-562d73d8\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">845322 ..., 73631 ..., 121434 ..., 18721 ..., 3361 ..., 254366 ..., 309010 ..., 276245 ..., 138 ..., 2173 ...</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-562d73d9\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">value_type</span></p></td><td class=\"cl-562d73da\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">character</span></p></td><td class=\"cl-562d73e2\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">16</span></p></td><td class=\"cl-562d73e3\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">0</span></p></td><td class=\"cl-562d73e4\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">1</span></p></td><td class=\"cl-562d73e5\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">count</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-562d73ec\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">value_source</span></p></td><td class=\"cl-562d73ed\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">character</span></p></td><td class=\"cl-562d73ee\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">16</span></p></td><td class=\"cl-562d73f6\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">0</span></p></td><td class=\"cl-562d73f7\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">1</span></p></td><td class=\"cl-562d73f8\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">reported</span></p></td></tr></tbody><tfoot><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"6\"class=\"cl-562d73f9\"><p class=\"cl-562d67a8\"><span class=\"cl-562c2fdc\">Data frame dimensions: 16 rows × 7 columns</span></p></td></tr></tfoot></table></div>\n```\n\n:::\n:::\n\n\n### Verify Data Consistency\n\nInitial checks reveal Texas's reporting structure and terminology\ndifferences.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nInitial data availability:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRace data: counts \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nGender data: counts \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nNon-standard terminology found:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOffender types: Offenders, Arrestee \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRace terms: Asian, African American, Caucasian, Hispanic, Native American, Other \n```\n\n\n:::\n:::\n\n\n### Address Data Gaps\n\n#### Add Missing Male category\n\nTexas data reports only Female counts explicitly. We calculated Male counts\nby subtracting Female counts from total profiles, assuming binary gender\nclassification in the dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show male addition code\"}\n# First, let's examine the current structure of gender data\ngender_data <- tx_raw %>%\n  filter(variable_category == \"gender\")\n\ncat(\"Current gender structure:\\n\")\nprint(unique(gender_data$variable_detailed))\n\n# Get total profiles for each offender type\ntotal_profiles <- tx_raw %>%\n  filter(variable_category == \"total\" & variable_detailed == \"total_profiles\") %>%\n  select(offender_type, total_value = value)\n\n# Join total profiles with gender data\ngender_with_totals <- gender_data %>%\n  left_join(total_profiles, by = \"offender_type\")\n\n# Create Male entries for each offender type\nmale_entries <- gender_with_totals %>%\n  filter(variable_detailed == \"Female\") %>%\n  mutate(\n    variable_detailed = \"Male\",\n    value = total_value - value, \n    value_source = \"calculated\",\n    total_value = NULL \n  )\n\n# Add these entries to the original dataset\ntx_raw_with_male <- tx_raw %>%\n  bind_rows(male_entries)\n\n# Update the tx_raw object\ntx_clean <- tx_raw_with_male\n\n# Verify the addition\ncat(\"\\nAfter adding Male entries - gender categories:\\n\")\nprint(unique(tx_clean %>% \n       filter(variable_category == \"gender\") %>% \n       pull(variable_detailed)))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCurrent gender structure:\n[1] \"Female\"\n\nAfter adding Male entries - gender categories:\n[1] \"Female\" \"Male\"  \n```\n\n\n:::\n:::\n\n\n#### Standardize Terminology\n\nTexas uses \"Offenders\" instead of \"Convicted Offender\" and \"Caucasian\"\ninstead of \"White\".\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show terminology standardization code\"}\n# Standardize offender types and racial terminology\ntx_clean <- tx_clean %>%\n  mutate(\n    offender_type = case_when(\n      offender_type == \"Offenders\" ~ \"Convicted Offender\",\n      TRUE ~ offender_type\n    ),\n    variable_detailed = case_when(\n      variable_detailed == \"Caucasian\" ~ \"White\",\n      variable_detailed == \"African American\" ~ \"Black\",\n      TRUE ~ variable_detailed\n    )\n  )\n\ncat(\"✓ Standardized terminology:\\n\")\ncat(\"  - 'Offenders' → 'Convicted Offender'\\n\")\ncat(\"  - 'Caucasian' → 'White'\\n\")\ncat(\"  - 'African American' → 'Black'\\n\")\ncat(paste(\"Offender types after standardization:\", paste(sort(unique(tx_clean$offender_type)), collapse = \", \"), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Standardized terminology:\n  - 'Offenders' → 'Convicted Offender'\n  - 'Caucasian' → 'White'\n  - 'African American' → 'Black'\nOffender types after standardization: Arrestee, Convicted Offender \n```\n\n\n:::\n:::\n\n\n#### Create Unknown Category\n\nTexas race count is inconsistent, with a significant number of profiles not reported in any racial category.\n\nUnknown category was created to account for these missing profiles.\n\nThe calculated values are added with a **`value_source = \"calculated\"`** tag to maintain transparency about what was provided versus what was derived.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show unknown addition code\"}\n# Add Unknown race category to reconcile totals\ntx_clean <- fill_demographic_gaps(tx_clean)\n\n# Verify the fix\ncat(\"Category totals after adding Unknown race category:\\n\")\nverify_category_totals(tx_clean) %>% kable() %>% kable_styling()\n\ncat(\"\\nCounts consistency after adding Unknown:\\n\")\ncat(paste(\"All counts consistent:\", counts_consistent(tx_clean), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCategory totals after adding Unknown race category:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> offender_type </th>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> total_profiles </th>\n   <th style=\"text-align:right;\"> sum_counts </th>\n   <th style=\"text-align:right;\"> difference </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Arrestee </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 73631 </td>\n   <td style=\"text-align:right;\"> 73631 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Arrestee </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 73631 </td>\n   <td style=\"text-align:right;\"> 73631 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Convicted Offender </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 845322 </td>\n   <td style=\"text-align:right;\"> 845322 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Convicted Offender </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 845322 </td>\n   <td style=\"text-align:right;\"> 845322 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCounts consistency after adding Unknown:\nAll counts consistent: TRUE \n```\n\n\n:::\n:::\n\n\n#### Create Combined Totals\n\nTexas only reported data for \"Convicted Offender\" and \"Arrestee\"\nseparately. We calculate Combined totals.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show combined addition code\"}\n# Calculate Combined totals using helper function\ntx_clean <- add_combined(tx_clean)\n\ncat(\"✓ Created Combined totals for Texas\\n\")\n\n# Show the Combined total\ncombined_total <- tx_clean %>%\n  filter(offender_type == \"Combined\",\n         variable_category == \"total\",\n         variable_detailed == \"total_profiles\") %>%\n  pull(value)\n\ncat(paste(\"Combined total profiles:\", format(combined_total, big.mark = \",\"), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Created Combined totals for Texas\nCombined total profiles: 918,953 \n```\n\n\n:::\n:::\n\n\n#### Calculate Percentages\n\nTransforms the data from counts into percentages for comparative\nanalysis.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show percentage calculation code\"}\n# Derive percentages from counts\ntx_clean <- add_percentages(tx_clean)\n\ncat(\"✓ Added percentages for all demographic categories\\n\")\n\n# Check percentage consistency\ncat(\"Percentage consistency check:\\n\")\ncat(paste(\"All percentages sum to ~100%:\", percentages_consistent(tx_clean), \"\\n\\n\"))\n\n# Show current data availability\ncat(\"Final data availability:\\n\")\ncat(paste(\"Race data:\", report_status(tx_clean, \"race\"), \"\\n\"))\ncat(paste(\"Gender data:\", report_status(tx_clean, \"gender\"), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Added percentages for all demographic categories\nPercentage consistency check:\nAll percentages sum to ~100%: TRUE \n\nFinal data availability:\nRace data: both \nGender data: both \n```\n\n\n:::\n:::\n\n\n### Verify Data Consistency\n\nFinal checks to ensure all processing maintained data integrity.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nFinal data consistency checks:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nVerifying that demographic counts match reported totals:\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> offender_type </th>\n   <th style=\"text-align:left;\"> variable_category </th>\n   <th style=\"text-align:right;\"> total_profiles </th>\n   <th style=\"text-align:right;\"> sum_counts </th>\n   <th style=\"text-align:right;\"> difference </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Arrestee </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 73631 </td>\n   <td style=\"text-align:right;\"> 73631 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Arrestee </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 73631 </td>\n   <td style=\"text-align:right;\"> 73631 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 918953 </td>\n   <td style=\"text-align:right;\"> 918953 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Combined </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 918953 </td>\n   <td style=\"text-align:right;\"> 918953 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Convicted Offender </td>\n   <td style=\"text-align:left;\"> gender </td>\n   <td style=\"text-align:right;\"> 845322 </td>\n   <td style=\"text-align:right;\"> 845322 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Convicted Offender </td>\n   <td style=\"text-align:left;\"> race </td>\n   <td style=\"text-align:right;\"> 845322 </td>\n   <td style=\"text-align:right;\"> 845322 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCounts consistency check:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll counts consistent: TRUE \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nPercentage consistency check:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAll percentages sum to ~100%: TRUE \n```\n\n\n:::\n:::\n\n\n### Prepare for Combined Dataset\n\nThe cleaned data is formatted to match the master schema and appended to\nthe `foia_combined` dataframe.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show Texas data preparation to combined dataset\"}\n# Prepare the cleaned data for the combined dataset\ntx_prepared <- prepare_state_for_combined(tx_clean, \"Texas\")\n\n# Append to the master combined dataframe\nfoia_combined <- bind_rows(foia_combined, tx_prepared)\n\ncat(paste0(\"✓ Appended \", nrow(tx_prepared), \" Texas rows to foia_combined\\n\"))\ncat(paste0(\"✓ Total rows in foia_combined: \", nrow(foia_combined), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Appended 57 Texas rows to foia_combined\n✓ Total rows in foia_combined: 202\n```\n\n\n:::\n:::\n\n\n### Document Metadata\n\nThe metadata is added with details on all processing steps performed.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show Texas data preparation and addition to metadata table\"}\n# Add Texas to the metadata table using the helper function\nadd_state_metadata(\"Texas\", tx_raw)\n\n# Update metadata with QC results and processing notes\nupdate_state_metadata(\"Texas\", \n                      counts_ok = counts_consistent(tx_clean),\n                      percentages_ok = percentages_consistent(tx_clean),\n                      notes_text = \"Standardized terminology: 'Offenders' to 'Convicted Offender', 'Caucasian' to 'White', 'African American' to 'Black'; calculated Combined totals and all percentages\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Metadata added for: Texas \n✓ Metadata updated for: Texas \n```\n\n\n:::\n:::\n\n\n### Visualizations\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Texas DNA Database Demographic Distributions](foia_processing_files/figure-html/tx-visualizations-1.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Texas DNA Database Demographic Distributions](foia_processing_files/figure-html/tx-visualizations-2.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Texas DNA Database Demographic Distributions](foia_processing_files/figure-html/tx-visualizations-3.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Texas DNA Database Demographic Distributions](foia_processing_files/figure-html/tx-visualizations-4.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Texas DNA Database Demographic Distributions](foia_processing_files/figure-html/tx-visualizations-5.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Texas DNA Database Demographic Distributions](foia_processing_files/figure-html/tx-visualizations-6.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Texas DNA Database Demographic Distributions](foia_processing_files/figure-html/tx-visualizations-7.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Texas DNA Database Demographic Distributions](foia_processing_files/figure-html/tx-visualizations-8.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Texas DNA Database Demographic Distributions](foia_processing_files/figure-html/tx-visualizations-9.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Texas DNA Database Demographic Distributions](foia_processing_files/figure-html/tx-visualizations-10.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Texas DNA Database Demographic Distributions](foia_processing_files/figure-html/tx-visualizations-11.png){width=768}\n:::\n\n::: {.cell-output-display}\n![Texas DNA Database Demographic Distributions](foia_processing_files/figure-html/tx-visualizations-12.png){width=768}\n:::\n:::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Texas Demographic Distributions by Offender Type](foia_processing_files/figure-html/tx-bar-charts-1.png){width=768}\n:::\n:::\n\n\n### Summary Statistics\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the summary statistics code\"}\ncat(\"Texas DNA Database Summary:\\n\")\ncat(\"=\", strrep(\"=\", 40), \"\\n\")\n\n# Total profiles by offender type\ntotals <- foia_combined %>%\n  filter(state == \"Texas\",\n         variable_category == \"total\",\n         variable_detailed == \"total_profiles\",\n         value_type == \"count\") %>%\n  select(offender_type, value, value_source) %>%\n  mutate(value_formatted = format(value, big.mark = \",\"))\n\nprint(totals)\n\n# Data completeness by value source\ncat(\"\\nData completeness by source:\\n\")\ncompleteness <- foia_combined %>%\n  filter(state == \"Texas\") %>%\n  group_by(value_source) %>%\n  summarise(n_values = n(), .groups = \"drop\")\n\nprint(completeness)\n\n# Final verification\ncat(\"\\nFinal verification:\\n\")\ncat(paste(\"Counts consistent:\", counts_consistent(foia_combined %>% filter(state == \"Texas\")), \"\\n\"))\ncat(paste(\"Percentages consistent:\", percentages_consistent(foia_combined %>% filter(state == \"Texas\")), \"\\n\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nTexas DNA Database Summary:\n= ======================================== \n# A tibble: 3 × 4\n  offender_type       value value_source value_formatted\n  <chr>               <dbl> <chr>        <chr>          \n1 Convicted Offender 845322 reported     \"845,322\"      \n2 Arrestee            73631 reported     \" 73,631\"      \n3 Combined           918953 calculated   \"918,953\"      \n\nData completeness by source:\n# A tibble: 2 × 2\n  value_source n_values\n  <chr>           <int>\n1 calculated         41\n2 reported           16\n\nFinal verification:\nCounts consistent: TRUE \nPercentages consistent: TRUE \n```\n\n\n:::\n:::\n\n\n### Summary of Texas Processing\n\nTexas data processing complete. The dataset required several\nadjustments:\n\n-   ✅ **Male Category Addition**:\n\n    -   \"Male\" added to `variable_detailed`\n\n\n-   ✅ **Terminology standardization**:\n\n    -   \"Offenders\" → \"Convicted Offender\"\n\n    -   \"Caucasian\" → \"White\"\n\n    -   \"African American\" → \"Black\"\n\n-   ✅ **Calculated additions**:\n\n    -   Combined totals across all offender types\n\n    -   Percentage values for all demographic categories\n\n-   ✅ **Quality checks**: All counts and percentages pass consistency\n    validation\n\n-   ✅ **Provenance tracking**: Clear distinction between reported and\n    calculated values\n\nThe Texas data is now standardized and ready for cross-state analysis.\n\n## Combined Dataset\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-fc6750188f1142154737\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-fc6750188f1142154737\">{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"0\\\" data-max=\\\"2771721\\\" data-scale=\\\"15\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"extensions\":[\"Buttons\",\"ColReorder\",\"Scroller\"],\"data\":[[\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"California\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Florida\",\"Indiana\",\"Indiana\",\"Indiana\",\"Indiana\",\"Indiana\",\"Indiana\",\"Indiana\",\"Indiana\",\"Indiana\",\"Indiana\",\"Indiana\",\"Indiana\",\"Indiana\",\"Indiana\",\"Indiana\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Maine\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"Nevada\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"South Dakota\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\",\"Texas\"],[\"Convicted Offender\",\"Arrestee\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Convicted Offender\",\"Arrestee\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Convicted Offender\",\"Arrestee\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Convicted Offender\",\"Arrestee\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Arrestee\",\"Arrestee\",\"Convicted Offender\",\"Convicted Offender\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Convicted Offender\",\"Arrestee\",\"Convicted Offender\",\"Arrestee\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Convicted Offender\",\"Arrestee\",\"Convicted Offender\",\"Arrestee\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Convicted Offender\",\"Arrestee\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Convicted Offender\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Arrestee\",\"Convicted Offender\",\"Arrestee\",\"Convicted Offender\",\"Arrestee\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\",\"Combined\"],[\"total\",\"total\",\"gender\",\"gender\",\"gender\",\"gender\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"gender\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"race\",\"total\",\"gender\",\"gender\",\"gender\",\"gender\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"gender\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"race\",\"total\",\"total\",\"gender\",\"gender\",\"gender\",\"gender\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"total\",\"total\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"total\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"total\",\"gender\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"gender\",\"gender\",\"gender\",\"total\",\"total\",\"total\",\"total\",\"total\",\"gender\",\"gender\",\"gender\",\"gender\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"total\",\"gender\",\"gender\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"total\",\"total\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"gender\",\"gender\",\"race\",\"race\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"total\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"gender\",\"gender\",\"race\",\"race\",\"gender\",\"gender\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\",\"race\"],[\"total_profiles\",\"total_profiles\",\"Female\",\"Male\",\"Unknown\",\"Female\",\"Male\",\"Unknown\",\"Black\",\"White\",\"Hispanic\",\"Asian\",\"Black\",\"White\",\"Hispanic\",\"Asian\",\"Unknown\",\"Unknown\",\"Female\",\"Male\",\"Unknown\",\"Black\",\"Asian\",\"White\",\"Hispanic\",\"Unknown\",\"total_profiles\",\"Female\",\"Male\",\"Unknown\",\"Female\",\"Male\",\"Unknown\",\"Black\",\"White\",\"Hispanic\",\"Asian\",\"Black\",\"White\",\"Hispanic\",\"Asian\",\"Unknown\",\"Unknown\",\"Female\",\"Male\",\"Unknown\",\"Black\",\"Asian\",\"White\",\"Hispanic\",\"Unknown\",\"total_profiles\",\"total_profiles\",\"Female\",\"Female\",\"Male\",\"Male\",\"Unknown\",\"Unknown\",\"Black\",\"Black\",\"Asian\",\"Asian\",\"White\",\"White\",\"Hispanic\",\"Hispanic\",\"Native American\",\"Native American\",\"Other\",\"Other\",\"Unknown\",\"Unknown\",\"total_profiles\",\"total_profiles\",\"Female\",\"Male\",\"White\",\"Black\",\"Hispanic\",\"Other\",\"total_profiles\",\"Female\",\"Male\",\"White\",\"Black\",\"Hispanic\",\"Other\",\"total_profiles\",\"Male\",\"Female\",\"Unknown\",\"White\",\"White\",\"Black\",\"Black\",\"Unknown\",\"Unknown\",\"Native American\",\"Native American\",\"Hispanic\",\"Hispanic\",\"Asian\",\"Asian\",\"Male\",\"Female\",\"Unknown\",\"total_profiles\",\"total_profiles\",\"total_profiles\",\"total_profiles\",\"total_profiles\",\"Female\",\"Female\",\"Male\",\"Male\",\"Unknown\",\"Unknown\",\"White\",\"White\",\"Unknown\",\"Unknown\",\"Native American\",\"Native American\",\"Black\",\"Black\",\"Asian\",\"Asian\",\"total_profiles\",\"Male\",\"Male\",\"Female\",\"Female\",\"Asian\",\"Black\",\"Hispanic\",\"Native American\",\"Unknown\",\"White\",\"Asian\",\"Black\",\"Hispanic\",\"Native American\",\"Unknown\",\"White\",\"total_profiles\",\"total_profiles\",\"Female\",\"Female\",\"Asian\",\"Black\",\"White\",\"Hispanic\",\"Native American\",\"Other\",\"Asian\",\"Black\",\"White\",\"Hispanic\",\"Native American\",\"Other\",\"Male\",\"Male\",\"Unknown\",\"Unknown\",\"Female\",\"Male\",\"Asian\",\"Black\",\"Hispanic\",\"Native American\",\"Other\",\"Unknown\",\"White\",\"total_profiles\",\"Female\",\"Female\",\"Asian\",\"Black\",\"White\",\"Hispanic\",\"Native American\",\"Other\",\"Asian\",\"Black\",\"White\",\"Hispanic\",\"Native American\",\"Other\",\"Male\",\"Male\",\"Unknown\",\"Unknown\",\"Female\",\"Male\",\"Asian\",\"Black\",\"Hispanic\",\"Native American\",\"Other\",\"Unknown\",\"White\"],[2019899,751822,309827,1603222,106850,208225,524231,19366,368952,588555,652121,16384,104741,231313,308450,11191,393887,96127,518052,2127453,126216,473693,27575,819868,960571,490014,2771721,15.34,79.37,5.29,27.7,69.73,2.58,18.27,29.14,32.28,0.8100000000000001,13.93,30.77,41.03,1.49,19.5,12.79,18.69,76.76000000000001,4.55,17.09,0.99,29.58,34.66,17.68,1175391,100,260885,22.2,901126,76.67,13380,1.14,413733,35.2,2659,0.23,721485,61.38,28452,2.42,667,0.06,1176,0.1,7219,0.61,279654,21087,20,80,69.65174129353234,25.87064676616916,3.980099502487562,0.4975124378109453,300741,60148,240593,209471,77804,11970,1496,33711,82.78278278278277,17.01701701701701,0.2002002002002002,31298,92.8,1299,3.9,470,1.4,345,1,171,0.5,128,0.4,27907,5737,67,344097,185074,53.785,159023,46.215,63287,18.392,280738,81.587,72,0.0209,238723,69.377,3491,1.015,5710,1.659,88174,25.625,7999,2.346,67753,51197,75.56,16556,24.44,0.08,5.96,4.35,21.54,1.32,66.75,54,4038,2947,14594,894,45226,845322,73631,121434,18721,3361,254366,309010,276245,138,2173,497,12903,33486,24202,24,358,723888,54910,29,2161,140155,778798,3858,267269,300447,162,2531,2190,342496,918953,14.37,25.43,0.4,30.09,36.56,32.68,0.02,0.26,0.67,17.52,45.48,32.87,0.03,0.49,85.63,74.56999999999999,0,2.93,15.25,84.75,0.42,29.08,32.69,0.02,0.28,0.24,37.27],[\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"count\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"percentage\",\"percentage\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"count\",\"count\",\"count\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"percentage\",\"count\",\"count\",\"percentage\",\"count\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"count\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\",\"percentage\"],[\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"reported\",\"calculated\",\"calculated\",\"calculated\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"calculated\",\"calculated\",\"calculated\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"reported\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\",\"calculated\"]],\"container\":\"<table class=\\\"cell-border stripe hover\\\">\\n  <thead>\\n    <tr>\\n      <th>state<\\/th>\\n      <th>offender_type<\\/th>\\n      <th>variable_category<\\/th>\\n      <th>variable_detailed<\\/th>\\n      <th>value<\\/th>\\n      <th>value_type<\\/th>\\n      <th>value_source<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"dom\":\"Bfrtip\",\"buttons\":[\"copy\",\"csv\",\"excel\",\"colvis\"],\"scrollX\":true,\"scrollY\":\"300px\",\"scroller\":true,\"pageLength\":10,\"columnDefs\":[{\"className\":\"dt-left\",\"targets\":[0,1,2,3,4,5,6]},{\"name\":\"state\",\"targets\":0},{\"name\":\"offender_type\",\"targets\":1},{\"name\":\"variable_category\",\"targets\":2},{\"name\":\"variable_detailed\",\"targets\":3},{\"name\":\"value\",\"targets\":4},{\"name\":\"value_type\",\"targets\":5},{\"name\":\"value_source\",\"targets\":6}],\"autoWidth\":true,\"language\":{\"search\":\"Filter:\",\"paginate\":{\"previous\":\"Previous\",\"next\":\"Next\"}},\"order\":[],\"orderClasses\":false,\"orderCellsTop\":true,\"rowCallback\":\"function(row, data, displayNum, displayIndex, dataIndex) {\\nvar value=data[0]; $(this.api().cell(row, 0).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[6]; $(this.api().cell(row, 6).node()).css({'font-size':'12px','line-height':'90%'});\\n}\"}},\"evals\":[\"options.rowCallback\"],\"jsHooks\":[]}</script>\n```\n\n:::\n\n::: {.cell-output-display}\n![](foia_processing_files/figure-html/combine-all-states-2.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](foia_processing_files/figure-html/combine-all-states-3.png){width=672}\n:::\n:::\n\n\n## Metadata table\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-f45203f0a2b6658cd781\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f45203f0a2b6658cd781\">{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"logical\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"width: 100%; display: none;\\\">\\n      <select multiple=\\\"multiple\\\" style=\\\"width: 100%;\\\" data-options=\\\"[&quot;true&quot;,&quot;false&quot;]\\\"><\\/select>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"logical\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"width: 100%; display: none;\\\">\\n      <select multiple=\\\"multiple\\\" style=\\\"width: 100%;\\\" data-options=\\\"[&quot;true&quot;,&quot;false&quot;]\\\"><\\/select>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"logical\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"width: 100%; display: none;\\\">\\n      <select multiple=\\\"multiple\\\" style=\\\"width: 100%;\\\" data-options=\\\"[&quot;true&quot;,&quot;false&quot;]\\\"><\\/select>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"logical\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"width: 100%; display: none;\\\">\\n      <select multiple=\\\"multiple\\\" style=\\\"width: 100%;\\\" data-options=\\\"[&quot;true&quot;,&quot;false&quot;]\\\"><\\/select>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"logical\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"width: 100%; display: none;\\\">\\n      <select multiple=\\\"multiple\\\" style=\\\"width: 100%;\\\" data-options=\\\"[&quot;true&quot;,&quot;false&quot;]\\\"><\\/select>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"logical\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"width: 100%; display: none;\\\">\\n      <select multiple=\\\"multiple\\\" style=\\\"width: 100%;\\\" data-options=\\\"[&quot;true&quot;,&quot;false&quot;]\\\"><\\/select>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"logical\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"width: 100%; display: none;\\\">\\n      <select multiple=\\\"multiple\\\" style=\\\"width: 100%;\\\" data-options=\\\"[&quot;true&quot;,&quot;false&quot;]\\\"><\\/select>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"logical\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\" disabled=\\\"\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"width: 100%; display: none;\\\">\\n      <select multiple=\\\"multiple\\\" style=\\\"width: 100%;\\\" data-options=\\\"[&quot;true&quot;,&quot;false&quot;]\\\"><\\/select>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"logical\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"width: 100%; display: none;\\\">\\n      <select multiple=\\\"multiple\\\" style=\\\"width: 100%;\\\" data-options=\\\"[&quot;true&quot;,&quot;false&quot;]\\\"><\\/select>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"logical\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"width: 100%; display: none;\\\">\\n      <select multiple=\\\"multiple\\\" style=\\\"width: 100%;\\\" data-options=\\\"[&quot;true&quot;,&quot;false&quot;]\\\"><\\/select>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"extensions\":[\"Buttons\",\"ColReorder\",\"Scroller\"],\"data\":[[\"California\",\"Florida\",\"Indiana\",\"Maine\",\"Nevada\",\"South Dakota\",\"Texas\"],[\"counts\",\"both\",\"percentages\",\"both\",\"both\",\"both\",\"counts\"],[\"counts\",\"both\",\"percentages\",\"both\",\"both\",\"both\",\"counts\"],[\"counts\",\"both\",\"counts\",\"counts\",\"both\",\"counts\",\"counts\"],[true,false,true,false,true,false,false],[true,false,true,false,true,false,true],[false,true,true,true,true,true,false],[true,true,false,true,true,false,false],[false,true,true,false,false,false,true],[true,true,true,false,true,true,true],[false,false,false,false,false,true,false],[true,true,true,true,true,true,true],[true,true,true,true,false,true,true],[true,false,false,false,false,false,true],[\"Added Unknown race category to reconcile totals; calculated Combined totals and all percentages\",\"Complete dataset provided. No processing or calculations required. All values are reported.\",\"Converted string values to numeric; standardized 'Black' to 'African American'; calculated Combined total profiles; derived all demographic counts from reported percentages\",\"Complete dataset provided with both counts and percentages. No processing or calculations required. All values are reported.\",\"Standardized terminology: 'All' to 'Combined' and 'American Indian' to 'Native American'. All values remain reported.\",\"Standardized terminology: 'White/Caucasian' to 'White' and 'Other/Unknown' to 'Unknown'. Includes comprehensive gender_race intersectional data. All values remain reported.\",\"Standardized terminology: 'Offenders' to 'Convicted Offender', 'Caucasian' to 'White', 'African American' to 'Black'; calculated Combined totals and all percentages\"]],\"container\":\"<table class=\\\"cell-border stripe hover\\\">\\n  <thead>\\n    <tr>\\n      <th>state<\\/th>\\n      <th>race_data_provided<\\/th>\\n      <th>gender_data_provided<\\/th>\\n      <th>total_profiles_provided<\\/th>\\n      <th>convicted_offender_reported<\\/th>\\n      <th>arrestee_reported<\\/th>\\n      <th>combined_reported<\\/th>\\n      <th>has_unknown_category<\\/th>\\n      <th>has_other_category<\\/th>\\n      <th>uses_nonstandard_terminology<\\/th>\\n      <th>provides_crosstabulation<\\/th>\\n      <th>counts_sum_to_total<\\/th>\\n      <th>percentages_sum_to_100<\\/th>\\n      <th>total_calculated_combined<\\/th>\\n      <th>notes<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"dom\":\"Bfrtip\",\"buttons\":[\"copy\",\"csv\",\"excel\",\"colvis\"],\"scrollX\":true,\"scrollY\":\"300px\",\"scroller\":true,\"pageLength\":8,\"columnDefs\":[{\"className\":\"dt-left\",\"targets\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{\"name\":\"state\",\"targets\":0},{\"name\":\"race_data_provided\",\"targets\":1},{\"name\":\"gender_data_provided\",\"targets\":2},{\"name\":\"total_profiles_provided\",\"targets\":3},{\"name\":\"convicted_offender_reported\",\"targets\":4},{\"name\":\"arrestee_reported\",\"targets\":5},{\"name\":\"combined_reported\",\"targets\":6},{\"name\":\"has_unknown_category\",\"targets\":7},{\"name\":\"has_other_category\",\"targets\":8},{\"name\":\"uses_nonstandard_terminology\",\"targets\":9},{\"name\":\"provides_crosstabulation\",\"targets\":10},{\"name\":\"counts_sum_to_total\",\"targets\":11},{\"name\":\"percentages_sum_to_100\",\"targets\":12},{\"name\":\"total_calculated_combined\",\"targets\":13},{\"name\":\"notes\",\"targets\":14}],\"autoWidth\":true,\"language\":{\"search\":\"Filter:\",\"paginate\":{\"previous\":\"Previous\",\"next\":\"Next\"}},\"order\":[],\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[8,10,25,50,100],\"rowCallback\":\"function(row, data, displayNum, displayIndex, dataIndex) {\\nvar value=data[0]; $(this.api().cell(row, 0).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[6]; $(this.api().cell(row, 6).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[7]; $(this.api().cell(row, 7).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[8]; $(this.api().cell(row, 8).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[9]; $(this.api().cell(row, 9).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[10]; $(this.api().cell(row, 10).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[11]; $(this.api().cell(row, 11).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[12]; $(this.api().cell(row, 12).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[13]; $(this.api().cell(row, 13).node()).css({'font-size':'12px','line-height':'90%'});\\nvar value=data[14]; $(this.api().cell(row, 14).node()).css({'font-size':'12px','line-height':'90%'});\\n}\"}},\"evals\":[\"options.rowCallback\"],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n# Saving Processed Data\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show final saving process code\"}\n# Define output paths\noutput_dir <- here(\"data\", \"foia\", \"final\")\ndir.create(output_dir, recursive = TRUE, showWarnings = FALSE)\n\n# Save the combined dataset\nfoia_output_path <- here(output_dir, \"foia_data_clean.csv\")\nwrite_csv(foia_combined, foia_output_path)\ncat(paste(\"✓ Saved combined FOIA data to:\", foia_output_path, \"\\n\"))\n\n# Save the metadata\nmetadata_dir <- here(\"data\", \"foia\", \"intermediate\")\nmetadata_output_path <- here(metadata_dir, \"foia_state_metadata.csv\")\nwrite_csv(foia_state_metadata, metadata_output_path)\ncat(paste(\"✓ Saved state metadata to:\", metadata_output_path, \"\\n\"))\n\n# Create final frozen version (v1.0)\nfrozen_dir <- here(\"data\", \"v1.0\")\ndir.create(frozen_dir, recursive = TRUE, showWarnings = FALSE)\n\nfrozen_path <- here(frozen_dir, \"FOIA_demographics.csv\")\nwrite_csv(foia_combined, frozen_path)\ncat(paste(\"✓ Created frozen version 1.0 at:\", frozen_path, \"\\n\"))\n\ncat(\"\\n✅ All processing complete! The data is now ready for analysis.\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n✓ Saved combined FOIA data to: /Users/tlasisi/GitHub/PODFRIDGE-Databases/data/foia/final/foia_data_clean.csv \n✓ Saved state metadata to: /Users/tlasisi/GitHub/PODFRIDGE-Databases/data/foia/intermediate/foia_state_metadata.csv \n✓ Created frozen version 1.0 at: /Users/tlasisi/GitHub/PODFRIDGE-Databases/data/v1.0/FOIA_demographics.csv \n\n✅ All processing complete! The data is now ready for analysis.\n```\n\n\n:::\n:::\n\n\n# Conclusions\n\n1. **Data Acquisition and Harmonization**: We ingested seven unique state datasets (`california_foia_data.csv` through `texas_foia_data.csv`), each with distinct reporting formats, terminology, and levels of completeness. Through a systematic processing workflow, we harmonized these into a single, tidy long-format dataset (`foia_combined`), ensuring consistency across all variables.\n\n2. **Standardization of Terminology**: A significant challenge was the non-standard terminology used across states. We implemented a rigorous process to map all state-specific terms to a common data model:\n\n   - **Offender Types**: Standardized to `\"Convicted Offender\"`, `\"Arrestee\"`, and `\"Combined\"`.\n\n   - **Race Categories**: Mapped terms like `\"Caucasian\"`, `\"African American\"`, and `\"American Indian\"` to standardized categories (`\"White\"`, `\"Black\"`, `\"Native American\"`).\n\n   - **Total Profiles**: Consolidated terms like `\"total_flags\"` to `\"total_profiles\"`.\n\n3. **Imputation and Calculation of Missing Data**: To ensure comparability, we calculated values that were not directly provided by the states:\n\n   - **Derived Percentages**: For states providing only counts (CA, TX), we calculated percentage compositions.\n\n   - **Derived Counts**: For states providing only percentages (IN), we calculated absolute numbers using reported totals.\n\n   - **Calculated Totals**: We created `\"Combined\"` offender type totals for states that only reported separate `\"Convicted Offender\"` and `\"Arrestee\"` figures.\n\n   - **Inferred Categories**: We added `\"Unknown\"` race and `\"Male\"` gender categories where they were logically missing but necessary to reconcile reported totals (CA, TX).\n\n4. **Quality Assurance and Transparency**: A core principle of this project was maintaining transparency and data provenance. This allows future researchers to understand exactly what was provided by the state versus what was derived during processing.\n\n   - **Validation checks**: `counts_consistent()`, `percentages_consistent()`\n\n   - **Value tagging**: `\"reported\"` or `\"calculated\"`.\n\n   - **Metadata table**: `foia_state_metadata` provides a clear audit trail of each state's original characteristics and the processing steps applied.",
    "supporting": [
      "foia_processing_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/tabwid-1.1.3/tabwid.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/tabwid-1.1.3/tabwid.js\"></script>\n<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n<link href=\"../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/datatables-binding-0.34.0/datatables.js\"></script>\n<script src=\"../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<script src=\"../site_libs/jszip-1.13.6/jszip.min.js\"></script>\n<link href=\"../site_libs/dt-ext-buttons-1.13.6/css/buttons.dataTables.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-ext-buttons-1.13.6/js/dataTables.buttons.min.js\"></script>\n<script src=\"../site_libs/dt-ext-buttons-1.13.6/js/buttons.html5.min.js\"></script>\n<script src=\"../site_libs/dt-ext-buttons-1.13.6/js/buttons.colVis.min.js\"></script>\n<script src=\"../site_libs/dt-ext-buttons-1.13.6/js/buttons.print.min.js\"></script>\n<link href=\"../site_libs/dt-ext-colreorder-1.13.6/css/colReorder.dataTables.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-ext-colreorder-1.13.6/js/dataTables.colReorder.min.js\"></script>\n<link href=\"../site_libs/dt-ext-scroller-1.13.6/css/scroller.dataTables.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-ext-scroller-1.13.6/js/dataTables.scroller.min.js\"></script>\n<link href=\"../site_libs/nouislider-7.0.10/jquery.nouislider.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/nouislider-7.0.10/jquery.nouislider.min.js\"></script>\n<link href=\"../site_libs/selectize-0.12.0/selectize.bootstrap3.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/selectize-0.12.0/selectize.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.2/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.2/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}